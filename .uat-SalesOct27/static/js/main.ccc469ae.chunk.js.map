{"version":3,"sources":["serviceWorker.js","mappingTables/languageTranslations.js","components/PlaceHolder/index.js","setup.js","components/Kpi/index.js","hooks/QlikProvider.js","qDefs/List/chartControl.js","qDefs/List/appDataDef.js","hooks/useChartSpec.js","hooks/useGaugeContainer.js","qDefs/List/drillDownDataDef.js","hooks/useHyperCubeData.js","hooks/useSessionObject.js","hooks/useDoughnutContainer.js","components/Line/line.js","components/Line/index.js","components/Bar/bar.js","components/Bar/index.js","components/Gauge/index.js","hooks/useResizeObserver.js","components/LeapKpi/leapkpi.js","components/LeapKpi/index.js","components/ViewMore/index.js","components/Doughnut/index.js","components/colorTheme/index.js","mappingTables/drillDownMappingException.js","mappingTables/regions.js","DrillDownUrl.js","Pages/PerformancePage.js","hooks/usePageData.js","components/Loader/index.js","components/tab/index.js","App.js","hooks/useSession.js","hooks/useAppData.js","hooks/useGetSheetData.js","index.js"],"names":["Boolean","window","location","hostname","match","languages","key","language","message","loadingMsg","legendMsg","languageParam","URLSearchParams","search","get","PlaceHolder","filter","d","i","style","fontSize","width","height","display","justifyContent","alignItems","checkUserLogin","tenant","webIntegrationId","a","fetch","mode","credentials","redirect","headers","res","status","returnTo","encodeURIComponent","href","getQCSHeaders","url","response","loginUrl","URL","searchParams","append","undefined","csrfToken","Map","setup","name","process","spaceID","qtm","document","createElement","type","async","src","getElementsByTagName","QuantumMetricAPI","parentNode","insertBefore","ReactDOM","render","getElementById","config","host","isSecure","appname","settings","crossDomain","withCredentials","method","appName","axios","then","data","apps","find","app","resourceId","params","Object","keys","map","join","catch","error","navigator","serviceWorker","ready","registration","unregister","objDef","qDef","row","items","kpi_Val_type","qText","title","val","f_val","lbl","colors","length","value","variance1Title","variance1","variance2Title","variance2","variances_color","s","color","includes","fontWeight","split","f","Math","sign","parseInt","variance3","variance3Title","className","QlikContext","createContext","children","session","useConnectEngine","doc","useOpenDoc","Provider","chartControlDef","qInfo","qType","qHyperCubeDef","qDimensions","qFieldDefs","qSortCriterias","qSortByAscii","qInitialDataFetch","qWidth","qHeight","appDataDef","qMeasures","container","useState","chartSpec","setChartSpec","useEffect","update","current","chart","querySelector","sub$","fromEvent","pipe","getBoundingClientRect","startWith","subscribe","unsubscribe","chartSpecCalc","twoPi","PI","useRef","note2Value","arc","d3","gContainerBackground","selectAll","exit","remove","enter","classed","attr","endAngle","startAngle","innerRadius","outerRadius","circleCurrentPath","merge","drillDownDataDef","def","dataTransformFunc","path","handle","useSessionObject","layout","useGetLayout","invalidations","qResponse","setData","obj","paths","deepFind","qix","useContext","useCreateSessionObject","radius","transformx","transformy","totalFontSize","innerWidth","group","select","pie","sort","g","transition","delay","duration","attrTween","t","total","text","num","abs","toFixed","margin","Line","refLine","upperTarget","lowerTarget","colorTheme","d3Data","setD3Data","yAxisRef","xAxisRef","svgRef","lineRef","refLineRef","circleRef","urlRoot","slice","lastIndexOf","referenceLineData","latestPointData","refLineMax","refLineMin","xScale","useMemo","domain","qNum","range","yScale","yMax","yMin","min","xMin","xAxis","yAxis","ticks","lineFunction","x","y","gPath","gRefline","gSymbol","gWarningImage","gText","call","ref","debug","item","isNaN","pos","week","useHyperCubeData","useCallback","qHyperCube","qDataPages","qMatrix","lines","kpi_value_type","toUpperCase","r","lineData","o","lineChart","isNull","lineChartRef","useChartSpec","clientHeight","rows","tabName","parent","postMessage","refLines","Bar","target","targetRounded","tierName","rectRef","textRef","Title_y","xMaxlimit","xMax","tickFormat","overflow","paddingLeft","paddingTop","fill","transform","x1","x2","y1","y2","stroke","strokeWidth","barData","barChartRef","valueType","subtitle","note2Text","isFinite","note2Title","note1Value","note1Title","useGaugeContainer","viewBox","useResizeObserver","dimensions","setDimensions","observeTarget","resizeObserver","ResizeObserver","entries","forEach","entry","contentRect","observe","unobserve","LeapKpi","wrapperRef","svg","layers","order","stackGenerator","extent","layer","sequence","points","padding","bandwidth","tickSize","tickSizeOuter","values","Fragment","marginBottom","marginLeft","id","index","background","barcolors","d_keys","dim1","dim2","dimention","leapbartitle","leapkpititle","leapkpivalue","ViewMore","drillDownUrl","bg","iconColor","setIconColor","textDecoration","onMouseEnter","onMouseLeave","float","position","top","left","nameKey","myArray","DataRows","chartTitle","currency_abb","substr","chartColors","dataPoints","useDoughnutContainer","backgroundColor","reffLines","chartPrimaryColor","drillDownMappingException","_","pickBy","DrillDownUrl","sheetData","regions","drilldownAppData","sheet","desc","description","trim","engineObjectId","Page","bpTypeGroup","lodashGroupBy","toLowerCase","rowNum","indexOf","derivedPostion","Number","kpis","kpi","gauges","gauge","line","bars","bar","leaps","leap","doughnut","groupBy","groupedKpis","groupedGauges","groupedLines","groupedBars","groupedLeaps","groupedDoughnut","usePageData","bottomRowCount","kpiTopRowCount","getRowTitles","region","KpiColumnsTopRow","trunc","rel","rowtitle","Kpi","kpiCount","KpiColumnsBottomRow","GaugeColumns","Gauge","LineColumns","BarColumns","LeapKpiColums","DoughnnutColums","Doughnut","sortedBottomRow","concat","b","props","groupedGridRows","container_ref","rowItems","Loader","message1","Tab","activeTabSubTab","setActiveSubTab","tabsData","setTabsData","dataAvailalbe","SetdataAvailalbe","React","Children","element","isValidElement","tab","isMain","push","container_refZ","closest","idx","onClick","handleSubTabClick","TabPane","App","connectionError","chartControlData","setChartControlData","appData","setAppData","accessDenied","isLoading","setPreLoader","tabData","setTab","chartControl","appLayout","quarter","quarterStartDate","quarterEndDate","snapDate","tabField","qSortByState","qSortByFrequency","qSortByNumeric","qSortByLoadOrder","qSortByExpression","qExpression","qv","tabLayout","hasOwnProperty","useAppData","setSheetData","sheets","sheetId","sheetName","useGetSheetData","activePrimaryTab","setActivePrimaryTab","subTabGroups","subTabTitles","primaryTabgroups","sortedData","flow","sortBy","primaryTabs","tabItems","_subTabs","Set","groupsd","getSubData","noDataCondition","Maintab","tabN","lineHeight","String","prototype","startsWith","searchString","this","QlikProvider","console","log"],"mappings":"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","file":"static/js/main.ccc469ae.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export const languages = [\r\n  {\r\n    key: \"CS_CZ\",\r\n    language: \"Czech\",\r\n    message: \"Data nejsou k dispozici\",\r\n    loadingMsg: \"Řídicí panel se načítá, čekejte prosím.\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"DE_DE\",\r\n    language: \"German\",\r\n    message: \"Keine Daten verfügbar\",\r\n    loadingMsg: \"Dashboard wird geladen, bitte warten\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"EN_US\",\r\n    language: \"English\",\r\n    message: \"No Data Available\",\r\n    loadingMsg: \"Dashboard is loading, please wait\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"ES_ES\",\r\n    language: \"Spanish (Spain)\",\r\n    message: \"No hay información disponible\",\r\n    loadingMsg: \"Espera a que el panel de control se cargue\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"EN_GB\",\r\n    language: \"English UK\",\r\n    message: \"No Data Available\",\r\n    loadingMsg: \"Dashboard is loading, please wait\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"ES_MX\",\r\n    language: \"Spanish (LAS)\",\r\n    message: \"No hay información disponible\",\r\n    loadingMsg: \"El dashboard se está cargando, por favor espere\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"FR_FR\",\r\n    language: \"French\",\r\n    message: \"Aucune donnée disponible\",\r\n    loadingMsg: `Le tableau de bord est en cours de chargement, veuillez patienter`,\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"IN_ID\",\r\n    language: \"Indonesian\",\r\n    message: \"Tidak ada data tersedia\",\r\n    loadingMsg: \"Dasbor sedang dimuat, harap tunggu\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"IT_IT\",\r\n    language: \"Italian\",\r\n    message: \"Informazioni non disponibili\",\r\n    loadingMsg: \"Attendi, è in corso il caricamento del dashboard\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"KO_KR\",\r\n    language: \"Korean\",\r\n    message: \"사용가능한 데이터가 없습니다\",\r\n    loadingMsg: \"대시보드를 로드하는 중입니다. 잠시 기다려 주십시오.\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"NL_NL\",\r\n    language: \"Dutch\",\r\n    message: \"Geen data beschikbaar\",\r\n    loadingMsg: \"Dashboard wordt geladen, even geduld\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"PL_PL\",\r\n    language: \"Polish\",\r\n    message: \"Brak Danych\",\r\n    loadingMsg: \"Trwa ładowanie pulpitu, proszę czekać\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"PT_BR\",\r\n    language: \"Portuguese (Brazil)\",\r\n    message: \"Dados não disponíveis\",\r\n    loadingMsg: \"Painel está carregando, por favor, espere\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"RU_RU\",\r\n    language: \"Russian\",\r\n    message: \"Данные отсутствуют\",\r\n    loadingMsg: \"Панель управления загружается. Подождите.\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"TH_TH\",\r\n    language: \"Thai\",\r\n    message: \"No Data Available\",\r\n    loadingMsg: \"กำลังดาวน์โหลดแดชบอร์ด กรุณารอซักครู่\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"VI_VN\",\r\n    language: \"Vietnamese\",\r\n    message: \"Thông tin này hiện không có\",\r\n    loadingMsg: \"Báo cáo đang tải, vui lòng đợi trong giây lát\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"ZH_CN\",\r\n    language: \"Traditional Chinese\",\r\n    message: \"沒有可用資料\",\r\n    loadingMsg: \"正在載入儀表板，請稍候\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n  {\r\n    key: \"JA_JP\",\r\n    language: \"Japanese\",\r\n    message: \"利用できるデータがありません\",\r\n    loadingMsg: \"読み込み中です。今しばらくお待ちください。\",\r\n    legendMsg: 'Click on a KPI object to access detailed data'\r\n  },\r\n];\r\n\r\nexport default languages;\r\n","import React from \"react\";\r\nimport languages from \"../../mappingTables/languageTranslations\";\r\n\r\nconst urlParams = new URLSearchParams(window.location.search);\r\nconst languageParam = urlParams.get(\"lang\");\r\n\r\nconst PlaceHolder = ({ message }) => {\r\n  if (message !== \"Connection Failed\" && languageParam !== null) {\r\n    message = languages.filter((d, i) => d.key === languageParam)[0].message;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        fontSize: \"24px\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\nexport default PlaceHolder;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport axios from \"axios\";\r\nimport PlaceHolder from \"./components/PlaceHolder\";\r\n\r\nasync function checkUserLogin(tenant, webIntegrationId) {\r\n  try {\r\n    // call your-tenant.us.qlikcloud.com/api/v1/users/me to\r\n    // retrieve the user metadata, as a way to detect if they\r\n    // are signed in. An error will be thrown if the response\r\n    // is a non-2XX HTTP status:\r\n   //const res = await fetch(`/api/v1/users/me`, {\r\n    const res = await fetch(`https://${tenant}/api/v1/users/me`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        // web integration is sent as a header:\r\n        \"qlik-web-integration-id\": webIntegrationId,\r\n      },\r\n    });\r\n    if (res.status < 200 || res.status >= 400) throw res;\r\n  } catch (err) {\r\n    const returnTo = encodeURIComponent(window.location.href);\r\n    // redirect your user to the tenant log in screen, and once they're\r\n    // signed in, return to your web app:\r\n    window.location.href = `https://${tenant}/login?returnto=${returnTo}&qlik-web-integration-id=${webIntegrationId}`;\r\n    throw err;\r\n  }\r\n};\r\n\r\nasync function getQCSHeaders({ webIntegrationId, url }) {\r\n  const response = await fetch(`${url}/api/v1/csrf-token`, {\r\n    credentials: \"include\",\r\n    headers: { \"qlik-web-integration-id\": webIntegrationId },\r\n  });\r\n  if (response.status === 401) {\r\n    const loginUrl = new URL(`${url}/login`);\r\n    loginUrl.searchParams.append(\"returnto\", window.location.href);\r\n    loginUrl.searchParams.append(\"qlik-web-integration-id\", webIntegrationId);\r\n    window.location.href = loginUrl;\r\n    return undefined;\r\n  }\r\n  const csrfToken = new Map(response.headers).get(\"qlik-csrf-token\");\r\n  return {\r\n    \"qlik-web-integration-id\": webIntegrationId,\r\n    \"qlik-csrf-token\": csrfToken,\r\n  };\r\n}\r\n\r\n//make an ajax call to dynamically get the appID once the app list has been filtered by tag name\r\nconst setup = async (name) => {\r\n   //console.log(\"process\",process.env)\r\n\r\n  //for PRD\r\n  // if(host===\"ddwiel1pyau3r.cloudfront.net\"){\r\n  //   console.log(\"PRD\");\r\n  // }\r\n \r\n  //   const tenant =\"lenovo-lph-ai.us.qlikcloud.com\";\r\n  //   const webIntegrationId = \"9Qj-tLrexDWjKAoOJRx9Gnh6a0z7oTmA\";\r\n  //   const spaceID = \"61327a6341b8a9e9a21a53eb\";\r\n\r\n  //   (function() {\r\n  //     var qtm = document.createElement('script'); qtm.type = 'text/javascript'; qtm.async = 1;\r\n  //     qtm.src = 'https://cdn.quantummetric.com/qscripts/quantum-lenovopartnerhub.js';\r\n  //     var d = document.getElementsByTagName('script')[0];\r\n  //     !window.QuantumMetricAPI && d.parentNode.insertBefore(qtm, d);\r\n  // })();\r\n\r\n  //for UAT\r\n  // if(host===\"dyq9uf3gawydx.cloudfront.net\"){\r\n  //   console.log(\"UAT\");\r\n  // }\r\n  \r\n  // const tenant =\"mbq71d0rz7otbdf.eu.qlikcloud.com\";\r\n  // const webIntegrationId = \"pBw85_j9m_Thz5A6U5tDm37BiFmouLrH\";\r\n  // const spaceID = \"618bd084eac3bd232c7a07ec\";\r\n\r\n  const tenant = process.env.tenant;\r\n  const webIntegrationId = process.env.webIntegrationId;\r\n  const spaceID = process.env.spaceID;\r\n\r\n  if(process.env.Qlik_ENV === \"UAT\")\r\n  (function() {\r\n    var qtm = document.createElement('script'); qtm.type = 'text/javascript'; qtm.async = 1;\r\n    qtm.src = 'https://cdn.quantummetric.com/qscripts/quantum-lenovopartnerhub-test.js';\r\n    var d = document.getElementsByTagName('script')[0];\r\n    !window.QuantumMetricAPI && d.parentNode.insertBefore(qtm, d);\r\n  })();\r\n\r\n  if(process.env.Qlik_ENV === \"PRD\")\r\n   (function() {\r\n      var qtm = document.createElement('script'); qtm.type = 'text/javascript'; qtm.async = 1;\r\n      qtm.src = 'https://cdn.quantummetric.com/qscripts/quantum-lenovopartnerhub.js';\r\n      var d = document.getElementsByTagName('script')[0];\r\n      !window.QuantumMetricAPI && d.parentNode.insertBefore(qtm, d);\r\n  })();\r\n\r\n  // show connecting message\r\n  ReactDOM.render( \r\n    <PlaceHolder message=\"Connecting, please wait\" />,\r\n    document.getElementById(\"root\")\r\n  );\r\n\r\n  try {\r\n    await checkUserLogin(tenant, webIntegrationId);\r\n\r\n    const config = {\r\n      url: \"\",\r\n      host: tenant,\r\n      isSecure: true,\r\n      appname: \"\",\r\n      webIntegrationId\r\n    };\r\n  \r\n    const settings = {\r\n      crossDomain: true,\r\n      withCredentials: true, \r\n      url: `https://${tenant}/api/v1/items?resourceType=app&spaceId=${spaceID}&limit=50`,\r\n      method: \"GET\",\r\n      headers: { \"qlik-web-integration-id\": config.webIntegrationId },\r\n      appName: name\r\n    };\r\n  \r\n    return axios(settings)\r\n      .then(async ({ data: response }) => {\r\n        const apps = response.data;\r\n    //console.log(apps);\r\n        const appname =  apps.find(app => app.name === settings.appName)?.resourceId;\r\n        config.appname = appname;\r\n        const headers = await getQCSHeaders({\r\n          url: `https://${tenant}`,\r\n          webIntegrationId: webIntegrationId,\r\n        });\r\n        const params = Object.keys(headers)\r\n          .map((key) => `${key}=${headers[key]}`)\r\n          .join(\"&\");\r\n  \r\n        config.url = `wss://${config.host}/app/${appname}?${params}`;\r\n      //  console.log(config);\r\n        return { config, apps };\r\n      })\r\n      .catch((error) => {\r\n        return ReactDOM.render(\r\n          <PlaceHolder  message=\"Connection Failed\" />,\r\n          document.getElementById(\"root\")\r\n        );\r\n      });\r\n  } catch {\r\n    return ReactDOM.render(\r\n      <PlaceHolder message=\"Connecting, please wait\" />,\r\n      document.getElementById(\"root\")\r\n    );\r\n  }\r\n};\r\nexport default setup;\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport default ({ qDef: objDef }) => {\r\n //console.log(\"KPI DEF\", objDef);\r\n var debug = false;\r\n let row = objDef.map((items)=>{\r\n  return { kpi_Val_type:items[4].qText,\r\n            title:items[3].qText,\r\n            val:items[12].qText,\r\n            f_val:items[13].qText,\r\n            lbl:items[14].qText}\r\n            // return { kpi_Val_type: \"valueType\",\r\n            //   title:\"Title\",\r\n            //   val:\"Val\",\r\n            //   f_val:\"600.0K INR\",\r\n            //   lbl:\"lbl\"}\r\n  });\r\n\r\n  if(debug){\r\n    console.log(row);\r\n    if(row.length<3)\r\n    console.error(\"Custom error\", row);\r\n    console.table(row);\r\n  }\r\n\r\nvar colors =[\"#E1140A\",\"#00cc44\"]\r\n\r\n  const data = {\r\n        title: row.length ? row[0].title : \"\",\r\n        value: row.length ? row[0].f_val : \"\",\r\n        variance1Title : row.length > 1 ? row[1].lbl : \"\",\r\n        variance1 : row.length > 1 ? row[1].f_val : \"\",\r\n        variance2Title: row.length > 2 ? row[2].lbl : \"\",\r\n        variance2: row.length > 2 ? row[2].f_val : \"\",\r\n        // variance3Title:row.length > 3 ? row[3].lbl : \"\",\r\n        // variance3: row.length > 3 ? row[3].lbl : \"\",\r\n    }\r\n\r\n function variances_color(params) {\r\n let s = { color: params.includes(\"▼\")?colors[0]:params.includes(\"▲\")?colors[1]:\"\",fontWeight:\"bolder\"}\r\n//  s.color=\"black\"\r\n\r\n if(params.includes(\"▼\"||\"▲\")){\r\n      if(params.includes(\"▼\")){\r\n          s.color= colors[0];\r\n      }\r\n      if(params.includes(\"▲\")){\r\n            s.color= colors[1];\r\n      }\r\n}\r\n\r\n if(params.includes(\"%\"))\r\n {\r\n       let d = params.split(\"%\")\r\n      // console.log(d);\r\n      // console.log(d[0]);\r\n      let f = Math.sign(parseInt(d[0]));\r\n      // console.log(\"f\",f);\r\n\r\n      if(f==-1){\r\n        s.color=colors[0]\r\n      }\r\n      else{\r\n        s.color=colors[1]\r\n      }\r\n    \r\n }\r\n\r\n \r\n return s;\r\n \r\n}\r\n\r\n if (!data) return <div>Loading...</div>;\r\n\r\n  const {\r\n    title,\r\n    value,\r\n    variance1,\r\n    variance2,\r\n    variance3,\r\n    variance1Title,\r\n    variance2Title,\r\n    variance3Title\r\n  } = data;\r\n\r\n  return (\r\n    <div className=\"kpi-container\">\r\n      <div className={`subtitle`}>{title}</div>\r\n      <div className=\"kpi-value-section\">\r\n        <div\r\n          className={\r\n            objDef.length === 4\r\n              ? \"kpi-value display kpiv2\"\r\n              : \"kpi-value display\"\r\n          }\r\n        >\r\n \r\n           {value}\r\n        </div>\r\n        <div className=\"kpi-variances\">\r\n          <div className=\"kpi-variance\">\r\n            <div\r\n              className={\r\n                objDef.length === 4\r\n                  ? \"note variance-label kpiv2\"\r\n                  : \"note variance-label\"\r\n              }\r\n              title={variance1Title}\r\n            >\r\n              {variance1Title}  \r\n            </div>\r\n            <div className={\"note-value\"} style={ variances_color(variance1) }  >{variance1}</div>\r\n          </div>\r\n          <div className=\"kpi-variance\">\r\n            <div\r\n              className={\r\n                objDef.length === 4\r\n                  ? \"note variance-label kpiv2\"\r\n                  : \"note variance-label\"\r\n              }\r\n              title={variance2Title}\r\n            >\r\n              {variance2Title}\r\n            </div>\r\n            <div className={\"note-value\"} style={ variances_color(variance2)}>{variance2}</div>\r\n          </div>\r\n          {variance3Title !== null && variance3 !== null ? (\r\n            <div className=\"kpi-variance\">\r\n              <div\r\n                className={\r\n                  objDef.length === 4\r\n                    ? \"note variance-label kpiv2\"\r\n                    : \"note variance-label\"\r\n                }\r\n              >\r\n                {variance3Title}\r\n              </div>\r\n              <div className={\"note\"}>{variance3}</div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { createContext } from \"react\";\r\nimport { useConnectEngine } from \"qlik-hooks\";\r\nimport { useOpenDoc } from \"qlik-hooks/Global\";\r\n\r\n//set up context for Qlik connection data\r\nexport const QlikContext = createContext();\r\n\r\nexport default ({ config, apps, children }) => {\r\n  //connect to Qlik engine and establish session\r\n  const session = useConnectEngine(config);\r\n\r\n  //open Qlik app\r\n  const doc = useOpenDoc(session, { params: [config.appname] });\r\n  return (\r\n    <QlikContext.Provider value={{ doc, session, apps, config }}>\r\n      {children}\r\n    </QlikContext.Provider>\r\n  );\r\n};\r\n","const chartControlDef = {\r\n  qInfo: {\r\n    qType: \"chart control\",\r\n  },\r\n  qHyperCubeDef: {\r\n    qDimensions: [\r\n      {\r\n        qDef: {\r\n          //qFieldDefs: [\"zKey_KPI_GEO_ID\"],\r\n          qFieldDefs: [\"kpi_id\"],\r\n          qSortCriterias: [\r\n            {\r\n              qSortByAscii: 1,\r\n            },\r\n          ],\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"position\"], //1/\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"element\"], //2\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"kpi_description\"], //3\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"kpi_value_type\"],  //4 no //kpi_label //kpi_value_type\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"pcgdcg\"], //5\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"Object GEO ID\"], //6\r\n         },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"geo\"], //7 \r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"persona_type\"], //8 \r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"bp_type\"], //9\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"bp_type_mapped\"], //10\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"sub_tab\"], // [\"=if(sub_tab='-','*',**)\"], //11 sub_tab\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"local_value\"], //12\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"local_value_formated\"], //13\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"kpi_label\"], //14\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"week_of_quarter\"], //15\r\n        },\r\n        \r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"value\"], //16\r\n        },\r\n        \r\n      },  {\r\n        qDef: {\r\n          qFieldDefs: [\"header\"], //17\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"tab\"], //18\r\n        },\r\n        \r\n      },\r\n      \r\n      \r\n     \r\n    ],\r\n// qFieldDefs: [\"zKey_KPI_GEO_ID\"],\r\n    qInitialDataFetch: [{ qWidth: 19, qHeight: 10000 / 19 }],\r\n  },\r\n};\r\n\r\nexport default chartControlDef;\r\n","const appDataDef = {\r\n  qInfo: {\r\n    qType: \"app data\",\r\n  },\r\n  qHyperCubeDef: {\r\n    qDimensions: [\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"quarter\"],\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"quarter_start_date\"],\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"quarter_end_date\"],\r\n        },\r\n      },\r\n    ],\r\n    qMeasures: [\r\n      {\r\n        qDef: {\r\n          qDef: \"=MinString(snap_date)\",\r\n        },\r\n      },\r\n    ],\r\n    qInitialDataFetch: [{ qWidth: 4, qHeight: 10000 / 4 }],\r\n  },\r\n};\r\n\r\nexport default appDataDef;\r\n","import { useEffect, useState } from \"react\";\r\nimport { fromEvent } from \"rxjs\";\r\nimport { map, startWith } from \"rxjs/operators\";\r\n// //calculate container size of objects using Rxjs\r\nexport default (container, data) => {\r\n  const [chartSpec, setChartSpec] = useState(0);\r\n\r\n  const chartSpecCalc = (container, update) => {\r\n    if (container.current !== undefined) {\r\n     // console.log(container);\r\n      const chart = container.current.querySelector(\".svg\");\r\n      const sub$ = fromEvent(window, \"resize\")\r\n        .pipe(\r\n          map(() => [\r\n            chart.getBoundingClientRect().width - 10,\r\n            chart.getBoundingClientRect().height - 20,\r\n          ]),\r\n          startWith([\r\n            chart.getBoundingClientRect().width - 10,\r\n            chart.getBoundingClientRect().height - 20,\r\n          ])\r\n        )\r\n        .subscribe(update);\r\n\r\n      return () => sub$.unsubscribe();\r\n    }\r\n    \r\n  };\r\n\r\n  useEffect(() => chartSpecCalc(container, setChartSpec), [container, data]);\r\n //console.log({ width: chartSpec[0], height: chartSpec[1] });\r\n  return { width: chartSpec[0], height: chartSpec[1] };\r\n};\r\n","import { useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\n\r\nconst twoPi = 2 * Math.PI;\r\n\r\n//D3 code for gauge object\r\nexport default (data) => {\r\n  //console.log(\"useGaugeContainer\",data)\r\n  const container = useRef();\r\n\r\n  useEffect(() => {\r\n    if (data !== null && data.note2Value !== \"NaN\") {\r\n      var arc = d3.arc();\r\n\r\n      //background circle\r\n      var gContainerBackground = d3\r\n        .selectAll(\".background-container\")\r\n        .selectAll(\".circle-max\")\r\n        .data([data]);\r\n\r\n      gContainerBackground.exit().remove();\r\n\r\n      gContainerBackground\r\n        .enter()\r\n        .append(\"path\")\r\n        .classed(\"circle-max\", true)\r\n        .attr(\r\n          \"d\",\r\n          arc({\r\n            endAngle: twoPi * 0.75,\r\n            startAngle: 0,\r\n            innerRadius: 45,\r\n            outerRadius: 45,\r\n          })\r\n        )\r\n        .attr(\"stroke-linecap\", \"round\")\r\n        .attr(\"stroke-dasharray\", 1)\r\n        .attr(\"transform\", \"translate(48,48) rotate(225)\");\r\n\r\n      //filled portion of the gauge\r\n      var circleCurrentPath = d3\r\n        .select(container.current)\r\n        .selectAll(`.circle-current`)\r\n        .data([data]);\r\n\r\n      circleCurrentPath.exit().remove();\r\n\r\n      circleCurrentPath\r\n        .enter()\r\n        .append(\"path\")\r\n        .classed(`circle-current`, true)\r\n        .merge(circleCurrentPath)\r\n        .attr(\"transform\", \"translate(48,48) rotate(225)\")\r\n        .attr(\"d\", (d) => {\r\n          if (d.note2Value < 0) {\r\n            return arc({ \r\n              endAngle: 0,\r\n              startAngle: 0,\r\n              innerRadius: 45,\r\n              outerRadius: 45,\r\n            });\r\n          } else\r\n            return arc({\r\n          //if d.note2Value > 1, which means target achived is higher that the target\r\n         //make the guage 100%\r\n              endAngle: twoPi * (d.note2Value> 1 ? 1 * 0.75 : d.note2Value  * 0.75), \r\n              startAngle: 0,\r\n              innerRadius: 45,\r\n              outerRadius: 45,\r\n            });\r\n        });\r\n    }\r\n  }, [data, container]);\r\n\r\n  return container;\r\n};\r\n","\r\nconst drillDownDataDef = {\r\n  qInfo: {\r\n    qType: \"drillData\",\r\n  },\r\n  qHyperCubeDef: {\r\n    qDimensions: [\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"sheet_id\"],\r\n          qSortCriterias: [\r\n            {\r\n              qSortByAscii: 1,\r\n            },\r\n          ],\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"sheet_name\"],\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"sheet_description\"],\r\n        },\r\n      },\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"app_name\"],\r\n        },\r\n      },\r\n    ],\r\n\r\n    qInitialDataFetch: [{ qWidth: 5, qHeight: 1000 / 5 }],\r\n  },\r\n};\r\n\r\nexport default drillDownDataDef;\r\n","import { useState, useEffect } from \"react\";\r\nimport { useSessionObject } from \"./index\";\r\nimport { useGetLayout } from \"qlik-hooks/GenericObject\";\r\n\r\nfunction deepFind(obj, path) {\r\n  var paths = path.split(\".\"),\r\n    current = obj,\r\n    i;\r\n\r\n  for (i = 0; i < paths.length; ++i) {\r\n    if (current[paths[i]] === undefined) {\r\n      return undefined;\r\n    } else {\r\n      current = current[paths[i]];\r\n    }\r\n  }\r\n  return current;\r\n}\r\n\r\n//get data from Qlik using hypercube definitions.\r\nexport default ({ def, dataTransformFunc = (a) => a, path = \"qHyperCube\" }) => {\r\n  const handle = useSessionObject(def);\r\n\r\n  const layout = useGetLayout(handle, {\r\n    params: [],\r\n    invalidations: true,\r\n  }).qResponse;\r\n\r\n  const [data, setData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (layout !== null && layout !== undefined) {\r\n      setData(dataTransformFunc(deepFind(layout, path)));\r\n    }\r\n\r\n    return () => setData(null);\r\n  }, [layout, dataTransformFunc, path]);\r\n\r\n  return {\r\n    data,\r\n    handle,\r\n  };\r\n};\r\n","import { useContext } from \"react\";\r\nimport { useCreateSessionObject } from \"qlik-hooks/Doc\";\r\nimport { QlikContext } from \"./index\";\r\n\r\nexport default (qDef) => {\r\n  const qix = useContext(QlikContext).doc;\r\n\r\n  const obj = useCreateSessionObject(qix, {\r\n    params: [qDef],\r\n  });\r\n\r\n  return obj;\r\n};\r\n","import { useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\n\r\n//const twoPi = 2 * Math.PI;\r\n\r\nfunction nFormatter(num) {\r\n  if (num >= 999999999) {\r\n     return ((Math.abs(num) / 1000000000).toFixed(1) + 'B');\r\n  }\r\n  if (num >= 999999) {\r\n   return  ((Math.abs(num) / 1000000).toFixed(1) + 'M');\r\n  }\r\n  if (num >= 999) {\r\n     return ((Math.abs(num) / 1000).toFixed(1) + 'K');\r\n  }\r\n  return Math.sign(num)*Math.abs(num);\r\n}\r\n\r\n//D3 code for gauge object\r\nexport default (data) => {\r\n // console.log(data)\r\n // console.log(\"useGaugeContainer\",data)\r\n  const container = useRef();\r\n\r\n  // var createPie = d3\r\n  // .pie()\r\n  // .sort(null) \r\n  // .startAngle(1.1*Math.PI)\r\n  // .endAngle(3.1*Math.PI)  \r\n  // .value(d => d.value);\r\n\r\n  \r\n\r\n  // const createArc = d3\r\n  // .arc()\r\n  // .innerRadius(radius)\r\n  // .outerRadius(radius-15);\r\n \r\n\r\n  // const colors = d3.scaleOrdinal(d3.schemeCategory10);\"#FFB43D\"\r\n  //var colors = [\"#FF6A00\",\"#8246AF\",\"#F04187\"   ]; \r\n  //var colors =  [\"#FF6A00\",\"#3e4b55\",\"#0099e6\"]; \r\n  var colors = [\"#FF7675\",\"#8246AF\",\"#F04187\"];\r\n\r\n  //const format = d3.format(\".2f\");\r\n\r\n  useEffect(() => {\r\n    // let s= generateData()\r\n    // console.log(s);\r\n    var radius = 30;\r\n    var transformx = 10;\r\n    var transformy = 45;\r\n    var totalFontSize = \"10px\";\r\n  \r\n    if(window.innerWidth > 1500){\r\n      radius = 30;\r\n      transformx =10;\r\n      transformy =45;\r\n    }\r\n  \r\n    if(window.innerWidth < 1300){\r\n      // alert(window.innerWidth)\r\n       radius = 30;\r\n       transformx = 40;\r\n       transformy =30;\r\n     }\r\n    if(window.innerWidth < 1200){\r\n     // alert(window.innerWidth)\r\n      radius = 28;\r\n      transformx = 40;\r\n      transformy =25;\r\n    }\r\n    if(window.innerWidth < 1100){\r\n      // alert(window.innerWidth)\r\n       radius = 25;\r\n       transformx = 45;\r\n       transformy =25;\r\n     }\r\n    if(window.innerWidth < 770){\r\n      //alert(window.innerWidth)\r\n       radius = 25;\r\n       transformx = 45;\r\n       transformy =25;\r\n       totalFontSize = \"8px\"\r\n    }\r\n      if (data !== null) {\r\n\r\n                  const group = d3.select(container.current);\r\n\r\n                  var Tooltip = group.select(\".toolTipContainer\")\r\n                  .append(\"div\")\r\n                  .style(\"opacity\", 0)\r\n                  .attr(\"class\", \"tooltip\")\r\n                  .style(\"background-color\", \"white\")\r\n                  .style(\"border\", \"solid\")\r\n                  .style(\"border-width\", \"2px\")\r\n                  .style(\"border-radius\", \"5px\")\r\n                  .style(\"padding\", \"5px\")\r\n                  .style(\"z-index\",\"200\");\r\n\r\n                  //group.select(\"svg\").\r\n                  const groupWithData = group.select(\"svg\").selectAll(\"g.arc\").data(data);\r\n                  groupWithData.exit().remove();\r\n\r\n                   var chart = group.select(\"svg\");\r\n                 //  var chart = group\r\n\r\n                    var arc = d3.arc()\r\n                    .innerRadius(radius)\r\n                    .outerRadius(radius-8);  //8\r\n\r\n                    var pie = d3.pie()\r\n                        .sort(null)\r\n                        .startAngle(1.1*Math.PI)\r\n                        .endAngle(3.1*Math.PI)\r\n                        .value(function(d) { return d.value });\r\n\r\n                     var mouseover = function(d) {\r\n                      // console.log(Tooltip);\r\n                      // console.log(container.current)\r\n                      Tooltip\r\n                        .style(\"opacity\", 1)\r\n                    }\r\n\r\n                    var mousemove = function(d) {\r\n                      // console.log(d3.event)\r\n                      //console.log(d.value)\r\n                      Tooltip\r\n                        .html(d.value)\r\n                        .style(\"top\",(d3.event.offsetY)+\"px\").style(\"left\",(d3.event.offsetX)+\"px\");\r\n                    }\r\n\r\n                    var mouseleave = function(d) {\r\n                      Tooltip\r\n                        .style(\"opacity\", 0)\r\n                    }\r\n                  \r\n                  var g = chart.selectAll(\".arc\")\r\n                    .data(pie(data))\r\n                    .enter().append(\"g\")\r\n                    .attr(\"transform\",  \"translate(\"+transformx+\",\"+transformy+\")\")\r\n                    .attr(\"class\", \"arc\")\r\n                \r\n                    \r\n                    g.append(\"path\")\r\n                    .style(\"fill\",(d, i) => colors[i])\r\n                    // .on(\"mouseover\", mouseover)\r\n                    // .on(\"mousemove\", mousemove)\r\n                    // .on(\"mouseleave\", mouseleave)\r\n                    .transition().delay(function(d, i) { return i * 200; }).duration(500)\r\n                    .attrTween('d', function(d) {\r\n                        var i = d3.interpolate(d.startAngle+0.0, d.endAngle);\r\n                        return function(t) {\r\n                            d.endAngle = i(t);\r\n                          return arc(d);\r\n                        }\r\n                      \r\n                  });\r\n\r\n                  var total = d3.sum(data, d => d.value)\r\n\r\n                  g.append(\"text\")\r\n                  // .attr(\"dx\", function(d){return -20})\r\n                  .text(function(){return nFormatter(total)})\r\n                  .attr('text-anchor', 'middle')\r\n                  .style('fill','#333f48')\r\n                  .style('color','#333f48') \r\n                  .style('font-weight', '500')\r\n                  .attr('y', radius * 0.16)\r\n                  .style(\"font-size\", totalFontSize)\r\n                  //.style(\"stroke\", \"black\")\r\n                  // .style(\"stroke-width\", \"4\")\r\n                   \r\n      \r\n//https://d3-graph-gallery.com/graph/interactivity_tooltip.html\r\n                      \r\n                         \r\n      }\r\n        \r\n  }, [data,container]); \r\n\r\n\r\n\r\n  return container;\r\n};\r\n","import React, { useRef, useEffect, useMemo, useState } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst margin = { top: 20, right: 10, bottom: 20, left: 20 };\r\n\r\nconst Line = ({\r\n  data,\r\n  width,\r\n  height,\r\n  refLine,\r\n  title,\r\n  upperTarget,\r\n  lowerTarget,\r\n  colorTheme = \"black\",\r\n  //colorTheme,\r\n}) => {\r\n  \r\n  const [d3Data, setD3Data] = useState({});\r\n\r\n  const yAxisRef = useRef();\r\n  const xAxisRef = useRef();\r\n  const svgRef = useRef();\r\n  const lineRef = useRef();\r\n  const refLineRef = useRef();\r\n  const circleRef = useRef();\r\n\r\n  const urlRoot = window.location.href.slice(\r\n    0,\r\n    window.location.href.lastIndexOf(\"/\")\r\n  );\r\n\r\n  useEffect(() => {\r\n    let debug = false;\r\n    const referenceLineData = refLine ? [upperTarget, lowerTarget] : null;\r\n\r\n    if(debug)\r\n    console.debug(\"reflineData\",referenceLineData);\r\n    \r\n    const latestPointData = refLine ? data[data.length - 1] : null;\r\n\r\n    if(debug)\r\n    console.log(\"last DataPoint\",latestPointData);\r\n    \r\n\r\n    const refLineMax = refLine ? d3.max(referenceLineData) : null;\r\n    const refLineMin = refLine ? d3.min(referenceLineData) : null;\r\n\r\n    setD3Data({\r\n      referenceLineData: referenceLineData,\r\n      latestPointData: latestPointData,\r\n      refLineMax: refLineMax,\r\n      refLineMin: refLineMin,\r\n      data: data,\r\n    });\r\n  }, [data, refLine, upperTarget, lowerTarget]);\r\n\r\n  const xScale = useMemo(() => {\r\n    if (width !== undefined) {\r\n      var x = d3\r\n        .scalePoint()\r\n        .domain([...d3Data.data.map((d) => d[1].qNum)])\r\n        .range([margin.left, width - margin.right]);\r\n\r\n      return x;\r\n    }\r\n  }, [width, d3Data.data]);\r\n  const yScale = useMemo(() => {\r\n    if (height !== undefined) {\r\n      var yMax = d3.max(d3Data.data, (d) => d[2].qNum + 1);\r\n      var yMin = d3.min(d3Data.data, (d) => d[2].qNum);\r\n      var y = d3\r\n        .scaleLinear()\r\n        .domain([Math.min(yMin, 0), (d3Data.referenceLineData && d3Data.referenceLineData[0] > yMax ) ? d3Data.referenceLineData[0] + 1 : yMax])\r\n        .range([height - margin.bottom, margin.top]);\r\n\r\n      return y;\r\n    }\r\n  }, [height, d3Data.data, d3Data.referenceLineData]);\r\n\r\n  useEffect(() => {\r\n    if (width && height !== 0) {\r\n      var xMin = d3.min(d3Data.data, (d) => d[1].qNum);\r\n\r\n      var xAxis = d3.axisBottom(xScale);\r\n      var yAxis = d3.axisLeft(yScale).ticks(5);\r\n\r\n      //line\r\n      const lineFunction = d3\r\n        .line()\r\n        .x((d, i) => xScale(d[1].qNum))\r\n        .y((d, i) => yScale(d[2].qNum));\r\n\r\n      const gPath = d3\r\n        .select(lineRef.current)\r\n        .selectAll(\".lineSVG\")\r\n        .data([d3Data.data]);\r\n\r\n      gPath.exit().remove();\r\n\r\n      gPath\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"stroke-width\", 2)\r\n       .attr(\"stroke\", \"#ff6a00\") //orange\r\n       // .attr(\"stroke\", \"#F04187\") // megenta\r\n      //  .attr(\"stroke\", \"#FF7675\") // red\r\n\r\n        .attr(\"fill\", \"none\")\r\n        .merge(gPath)\r\n        .classed(\"lineSVG\", true)\r\n        .attr(\"d\", lineFunction);\r\n\r\n      //ref line\r\n      if (refLine) {\r\n        const gRefline = d3\r\n          .select(refLineRef.current)\r\n          .selectAll(\".refLine\")\r\n          .data(d3Data.referenceLineData);\r\n        gRefline.exit().remove();\r\n        gRefline\r\n          .enter()\r\n          .append(\"line\")\r\n          .attr(\"stroke-width\", 2)\r\n          .attr(\"stroke\", colorTheme)\r\n          .classed(\"refLine\", true)\r\n          .merge(gRefline)\r\n          .attr(\"x1\", xScale(xMin))\r\n          .attr(\"x2\", width)\r\n          .attr(\"y1\", yScale(d3Data.referenceLineData[0]))\r\n          .attr(\"y2\", yScale(d3Data.referenceLineData[0]));\r\n\r\n        d3.select(refLineRef.current)\r\n          .append(\"line\")\r\n          .attr(\"stroke-width\", 2)\r\n          .attr(\"stroke\", colorTheme)\r\n          .merge(gRefline)\r\n          .classed(\"refLine\", true)\r\n          .attr(\"x1\", xScale(xMin))\r\n          .attr(\"x2\", width)\r\n          .attr(\"y1\", yScale(d3Data.referenceLineData[1]))\r\n          .attr(\"y2\", yScale(d3Data.referenceLineData[1]));\r\n      }\r\n\r\n      //symbols\r\n      const gSymbol = d3\r\n        .select(circleRef.current)\r\n        .selectAll(\".circle\")\r\n        .data(d3Data.data);\r\n\r\n      gSymbol.exit().remove();\r\n\r\n      gSymbol\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"stroke\", \"#ff6a00\")\r\n        .attr(\"fill\", \"#ff6a00\")\r\n        // .attr(\"stroke\", \"#F04187\") // megenta\r\n        // .attr(\"fill\", \"#F04187\") //megenta\r\n        // .attr(\"stroke\", \"#FF7675\") // red\r\n        // .attr(\"fill\", \"#FF7675\")//red\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"r\", 3)\r\n        .merge(gSymbol)\r\n        .classed(\"circle\", true)\r\n        .attr(\"opacity\", (d) => {\r\n          if (d[2].qNum === \"NaN\") {\r\n            return \"0\";\r\n          } else {\r\n            return \"1\";\r\n          }\r\n        })\r\n        .attr(\"cx\", (d) => xScale(d[1].qNum))\r\n        .attr(\"cy\", (d) => yScale(d[2].qNum));\r\n      //image !\r\n      if (\r\n        (refLine === true &&\r\n          d3Data.latestPointData[2].qNum > d3Data.refLineMax) ||\r\n        (refLine === true && d3Data.latestPointData[2].qNum < d3Data.refLineMin)\r\n      ) {\r\n        const gWarningImage = d3\r\n          .select(svgRef.current)\r\n          .selectAll(\".warning_image\")\r\n          .data(d3Data.latestPointData);\r\n\r\n        gWarningImage.exit().remove();\r\n\r\n        gWarningImage\r\n          .enter()\r\n          .append(\"image\")\r\n          .attr(\"xlink:href\", `${urlRoot}/images/mark-warning.svg`)\r\n          .attr(\"width\", 20)\r\n          .attr(\"height\", 28.5)\r\n          .merge(gWarningImage)\r\n          .attr(\"x\", xScale(d3Data.latestPointData[1].qNum) - 10)\r\n          .attr(\"y\", () => {\r\n            if (d3Data.latestPointData[2].qNum > d3Data.refLineMax) {\r\n              return yScale(d3Data.latestPointData[2].qNum) + 5;\r\n            } else return yScale(d3Data.latestPointData[2].qNum) - 35;\r\n          })\r\n          .classed(\"warning_image\", true);\r\n\r\n        const gText = d3\r\n          .select(svgRef.current)\r\n          .selectAll(\".warning_text\")\r\n          .data(d3Data.latestPointData);\r\n\r\n        gText.exit().remove();\r\n\r\n        gText\r\n          .enter()\r\n          .append(\"text\")\r\n          .text(`${d3Data.latestPointData[2].qNum}`)\r\n          .attr(\"font-size\", \"15px\")\r\n          .attr(\"font-weight\", \"bold\")\r\n          .attr(\"stroke\", \"black\")\r\n          .attr(\"stroke-width\", \"0.2px\")\r\n          .merge(gText)\r\n          .attr(\"x\", xScale(d3Data.latestPointData[1].qNum) - 30)\r\n          .attr(\"y\", () => {\r\n            if (d3Data.latestPointData[2].qNum > d3Data.refLineMax) {\r\n              return yScale(d3Data.latestPointData[2].qNum) + 25;\r\n            } else return yScale(d3Data.latestPointData[2].qNum) - 15;\r\n          })\r\n          .attr(\"fill\", colorTheme)\r\n          .classed(\"warning_text\", true);\r\n      }\r\n      //axis\r\n      d3.select(xAxisRef.current)\r\n        .call(xAxis)\r\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`);\r\n\r\n      d3.select(yAxisRef.current)\r\n        .call(yAxis)\r\n        .attr(\"transform\", `translate(${margin.left}, 0)`);\r\n\r\n      d3.select(yAxisRef.current)\r\n        .selectAll(\"line\")\r\n        .attr(\"x2\", width - margin.left)\r\n        .attr(\"stroke-dasharray\", \"2.2\");\r\n    }\r\n  }, [d3Data, refLine, width, height, urlRoot, colorTheme, xScale, yScale]);\r\n  return (\r\n    <div className=\"d3-line-container\">\r\n       <div className=\"utilization_container\">\r\n            <div style={{ height: \"10%\" }} className={`subtitle`}>\r\n              {title}\r\n            </div>\r\n            <svg\r\n              ref={svgRef}\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n              }}\r\n              className=\"svg\"\r\n            >\r\n              <g ref={yAxisRef} className=\"yAxis\"></g>\r\n              <g ref={xAxisRef} className=\"xAxis\"></g>\r\n              <g ref={lineRef} className=\"lineG\"></g>\r\n              <g ref={refLineRef} className=\"refLineG\"></g>\r\n              <g ref={circleRef} className=\"circleG\"></g>\r\n            </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Line;\r\n","\r\nimport { isNull } from \"lodash\";\r\nimport React, { useCallback, useRef } from \"react\";\r\nimport { useHyperCubeData, useChartSpec } from \"../../hooks/index\";\r\nimport Line from \"./line\";\r\nimport \"./style.css\";\r\nimport { colorTheme } from \"../../components/index\";\r\n\r\n//export default ({ qDef: objDef,style = { width: \"100%\" }, colorTheme }) => {\r\n  export default ({ qDef: objDef}) => {\r\n//  console.log(\"Line qDef\",objDef);\r\n const style = { width: \"100%\" }\r\n//  console.log(\"colorTheme\",colorTheme);\r\n// const colorTheme =\"black\";\r\nvar debug = false;\r\n\r\n let row = objDef.filter((item)=> !isNaN(parseInt(item[15].qText))) // to eliminate week NUll - \r\n .map((items)=>{\r\n  return {pos:items[1].qText, //\r\n          kpi_Val_type:items[4].qText,\r\n          title:items[3].qText,\r\n        //  val:items[12].qText,  //local value\r\n        val:items[16].qText,      //value\r\n          f_val:items[13].qText, //f_val\r\n          lbl:items[14].qText,\r\n          week: parseInt( items[15].qText),  //isNaN(items[15].qText)?0:\r\n        }\r\n  });\r\n  \r\n  if(debug){\r\n     // console.log(\"row\",row);\r\n      if(row.length<3)\r\n      console.error(\"Custom error\", row);\r\n      console.table(row);\r\n  }\r\n\r\n  const def = {\r\n    qInfo: {\r\n      qType: \"Line Chart\",\r\n    },\r\n    qHyperCubeDef: {\r\n      qDimensions: [\r\n        {\r\n          qDef: {\r\n            qFieldDefs: [\"quarter\"],\r\n            qSortCriterias: [\r\n              {\r\n                qSortByAscii: -1,\r\n              },\r\n            ],\r\n          }\r\n        },\r\n        {\r\n          qDef: {\r\n            qFieldDefs: [\"week_of_quarter\"],\r\n            qSortCriterias: [\r\n              {\r\n                qSortByAscii: 1,\r\n              },\r\n            ],\r\n        \r\n          }\r\n        },\r\n        {\r\n          qDef: {\r\n            qFieldDefs: [\"position\"],\r\n          }\r\n        },\r\n        {\r\n          qDef: {\r\n            qFieldDefs: [\"kpi_value_type\"],\r\n          }\r\n        },\r\n        {\r\n          qDef: {\r\n            qFieldDefs: [\"kpi_label\"],\r\n          }\r\n        },\r\n        {\r\n          qDef: {\r\n            qFieldDefs: [\"value\"],\r\n          },\r\n        },\r\n      ],\r\n      qMeasures: [\r\n      ],\r\n      qInitialDataFetch: [{ qWidth: 6, qHeight: 10000 / 6 }],\r\n    },\r\n  };\r\n\r\n  const { data = {} } = useHyperCubeData({\r\n    def,\r\n    dataTransformFunc: useCallback((qHyperCube) => {\r\n      return qHyperCube.qDataPages[0].qMatrix.map(function(item) {\r\n        return { \"quarter\":item[0].qText, \r\n                \"week\":item[1].qText, \r\n                \"pos\": item[2].qText, \r\n                \"kpi_value_type\" :item[3].qText, \r\n                \"lbl\" :item[4].qText, \r\n                \"val\": item[5].qText};\r\n       });\r\n    }, []),\r\n  });\r\n  \r\n\r\n//  var lines = row.map(function(r){\r\n//  let point = [{\"qNum\": parseInt(r.val)},{\"qNum\":parseInt(r.week) },{\"qNum\":parseInt(r.val)}]\r\n//   return point;\r\n//  })  \r\n\r\n var lines = null;\r\n var refLine = false;\r\nif(data && row.length){\r\n\r\n  if(debug){\r\n    // console.debug(\"data\",data); \r\n    // console.debug(\"lineData\",lineData);\r\n    }\r\n\r\n    \r\n  //(item)=> item.week !== \"-\"? !isNaN(item.week):true\r\n // (item)=>item.kpi_value_type=='ACTUAL'\r\n    lines = data.filter((item)=> item.week !== \"-\"? !isNaN(item.week):true)\r\n    .filter((item)=> item.pos === row[0].pos)\r\n    .filter((item)=>(item.kpi_value_type).toUpperCase()==='ACTUAL')\r\n    .map(function(r){ return  [{\"qNum\": parseInt(r.val)},{\"qNum\":parseInt(r.week) },{\"qNum\":parseInt(r.val)}];\r\n  });\r\n  \r\n  var lineData= {\r\n    title: row.find(o => (o.kpi_Val_type).toUpperCase() === 'ACTUAL').lbl,\r\n    lineChart:lines,\r\n    upperTarget: data.filter((item)=>(item.kpi_value_type).toUpperCase()==='UPPER TARGET').length ? data.filter((item)=>(item.kpi_value_type).toUpperCase()==='UPPER TARGET')[0].val:null,\r\n    lowerTarget: data.filter((item)=>(item.kpi_value_type).toUpperCase()==='LOWER TARGET').length ? data.filter((item)=>(item.kpi_value_type).toUpperCase()==='LOWER TARGET')[0].val:null ,\r\n  };\r\n\r\n  if(debug)\r\n  console.log(lineData)\r\n\r\n refLine = isNull(lineData.upperTarget)?false: isNull(lineData.lowerTarget)?false:true;\r\n//  refLine = isNull(lineData.upperTarget)?false: isNull(lineData.lowerTarget)?false:true;\r\n//  console.log(refLine)\r\n}\r\n\r\n\r\n\r\n//set state with chart width\r\n  const lineChartRef = useRef();\r\n  const { width, height } = useChartSpec(lineChartRef, data);\r\n// console.log(\"chart spec\",width, height)\r\n\r\nlet message = { \r\n  height:document.getElementById('root').clientHeight,\r\n  rows:\"dummy\",\r\n  tabName:\"dummy\"\r\n}\r\n\r\nif(message.height!==\"undefined\" ){\r\n//  console.log(\"*Height info from line:\",message);\r\n  window.parent.postMessage(message,\"*\");\r\n}\r\n\r\n  if (data !== null) {\r\n    return (\r\n      <div style={style} ref={lineChartRef}>\r\n        <Line\r\n          title={lineData.title}\r\n          data={lineData.lineChart}\r\n          upperTarget={lineData.upperTarget}\r\n          lowerTarget={lineData.lowerTarget}\r\n          width={width}\r\n          height={height}\r\n          refLine={refLine}\r\n          colorTheme={colorTheme.refLines}\r\n        />\r\n      </div>\r\n    );\r\n  } else return <div   style={{ color: \"black\" }}> Loading...</div>;\r\n};\r\n","import React, { useRef, useEffect, useMemo } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst margin = { top: 10, right: 15, bottom: 30, left: 10 };\r\n\r\nconst Bar = ({\r\n  value,\r\n  target,\r\n  targetRounded,\r\n  tierName,\r\n  title,\r\n  width,\r\n  height,\r\n}) => {\r\n  const xAxisRef = useRef();\r\n  const rectRef = useRef();\r\n  const lineRef = useRef();\r\n  const textRef = useRef();\r\n\r\n  var Title_y= 40;\r\n\r\n // if(window.innerWidth > 1400){\r\n  //   height=250;\r\n  //  // Title_y= 40;\r\n  // }\r\n  if(window.innerWidth < 1200){\r\n    // alert(window.innerWidth)\r\n    height=200;\r\n  //  Title_y= 40;\r\n   }\r\n   if(window.innerWidth < 1200){\r\n    // alert(window.innerWidth)\r\n    height=210;\r\n  //  Title_y= 40;\r\n   }\r\n   if(window.innerWidth < 769){\r\n    // alert(window.innerWidth)\r\n    height=170;\r\n    Title_y= 15;\r\n   }\r\n\r\n   \r\n  const xScale = useMemo(() => {\r\n    if (width !== undefined) {\r\n      const xMaxlimit = d3.max([value, target]);\r\n\r\n      //const xMax = xMaxlimit * 1.2;\r\n      //if target is grater than 1 million change the max value\r\n    //  const xxMax = (target > 1000000)? xMax * 2 : xMax * 1.2;\r\n     // const xMax =(target > 10000000)? xMaxlimit * 20 : xMaxlimit * 2;\r\n      const xMax = (target > 1000000)? ((target > 10000000)? xMaxlimit * 20 : xMaxlimit * 2) : xMaxlimit * 1.2;\r\n\r\n      const x = d3\r\n        .scaleLinear()\r\n      // .domain([0, xMaxlimit * 1.2])\r\n       .domain([0,xMax])\r\n        .range([margin.left, width - margin.right]);\r\n      return x;\r\n    }\r\n  }, [width, value, target]);\r\n\r\n  useEffect(() => {\r\n   \r\n    if (width !== undefined) {\r\n      const xAxis = d3.axisBottom(xScale).ticks(2).tickFormat(d3.format(\".2s\"));\r\n      d3.select(xAxisRef.current).call(xAxis);\r\n    }\r\n  \r\n  }, [xScale, width]);\r\n  return (\r\n    <svg\r\n      width={\"90%\"}\r\n      height={height}\r\n      className=\"svg\"\r\n      style={{ overflow: \"visible\", color:\"black\", paddingLeft:\"30px\", paddingTop:\"10px\" }}\r\n    >\r\n      <g>\r\n        {width !== undefined && width > 0 ? (\r\n          <text x={10} y={Title_y} fill=\"black\" className=\"subtitle\">\r\n            {title}\r\n          </text>\r\n        ) : null}\r\n      </g>\r\n      <g\r\n        ref={xAxisRef}\r\n        className=\"xAxisContainer\"\r\n        transform={`translate(0, ${height / 1.5})`}\r\n      />\r\n      {width !== undefined && width > 0 ? (\r\n        <g\r\n          className=\"rectContainer\"\r\n          ref={rectRef}\r\n          transform={`translate(${margin.left}, ${height / 2.5} )`}\r\n        >\r\n          <rect\r\n            ref={rectRef}\r\n            width={xScale(value) - margin.left}\r\n            height={height / 4}\r\n            className=\"rect\"\r\n            fill={\"#ff6a00\"} //orange\r\n            //fill={\"#F04187\"} //megenta\r\n            // fill={\"#FF7675\"} //red\r\n          \r\n          />\r\n        </g>\r\n      ) : null}\r\n      <g ref={lineRef} className=\"lineContainer\">\r\n        {width !== undefined && width > 0 ? (\r\n          <line\r\n            x1={xScale(target)}\r\n            x2={xScale(target)}\r\n            y1={height / 1.5}\r\n            y2={height / 3}\r\n            stroke=\"black\"\r\n            strokeWidth={\"2px\"}\r\n          />\r\n        ) : null}\r\n      </g>\r\n      <g ref={textRef} className=\"textContainer\">\r\n        {width !== undefined && width > 0 ? (\r\n          <text\r\n            // x={xScale(target) - 70}\r\n            y={height / 3 - 10}\r\n            fill=\"black\"\r\n            className=\"subtitle\"\r\n          >\r\n            {tierName} ({targetRounded})\r\n          </text>\r\n        ) : null}\r\n      </g>\r\n    </svg>\r\n    \r\n  );\r\n};\r\n\r\nexport default Bar;\r\n","import React, { useCallback, useRef } from \"react\";\r\nimport { useHyperCubeData, useChartSpec } from \"../../hooks/index\";\r\nimport \"./style.css\";\r\n\r\nimport Bar from \"./bar\";\r\n\r\nexport default ({ qDef: objDef }) => {\r\n //console.log(\"Bar qDef\",objDef);\r\n  var debug = false;\r\n  let row = objDef.map((items)=>{\r\n    return {pos:items[1].qText, //\r\n            kpi_Val_type:items[4].qText,\r\n            title:items[3].qText,\r\n            val:items[12].qText,\r\n            f_val:items[13].qText, //f_val\r\n            lbl:items[14].qText}\r\n    });\r\n\r\n  if(debug){\r\n    console.log(row);\r\n    if(row.length<3)\r\n    console.error(\"Custom error\", row);\r\n  console.table(row);\r\n  }\r\n\r\nconst def = {\r\n  qInfo: {\r\n    qType: \"app data\",\r\n  },\r\n  qHyperCubeDef: {\r\n    qDimensions: [\r\n      {\r\n        qDef: {\r\n          qFieldDefs: [\"Kpi_id\"],\r\n        },\r\n      },\r\n    ],\r\n    qMeasures: [\r\n    ],\r\n    qInitialDataFetch: [{ qWidth: 1, qHeight: 10 / 1 }],\r\n  },\r\n};\r\n\r\nconst { data = {} } = useHyperCubeData({\r\n  def,\r\n  dataTransformFunc: useCallback((qHyperCube) => {\r\n    return qHyperCube;\r\n  }, []),\r\n});\r\n\r\n  var barData = {\r\n    \"value\": row.find(o => o.kpi_Val_type === 'ACTUAL').val,\r\n    \"target\":row.find(o => o.kpi_Val_type === 'TARGET').val,\r\n    \"targetRounded\": row.find(o => o.kpi_Val_type === 'TARGET').f_val,\r\n    \"tierName\": row.find(o => o.kpi_Val_type === 'TARGET TIER NAME').lbl,\r\n    \"title\":row.find(o => o.kpi_Val_type === 'ACTUAL').lbl\r\n}; //Target\r\n\r\n  if(barData){\r\n  barData.value = isNaN(barData.value)?0:barData.value;\r\n  barData.target = isNaN(barData.target)?0:barData.target;\r\n  }\r\n\r\n  //return <div className=\"justify-content: space-around;\">Loading...</div>;\r\n// barData ={\r\n//   target: \"1090320.0\",//\"1290320.0\",\r\n// targetRounded: \"1.3 M GBP\",\r\n// tierName: \"Platinum\",\r\n// title: \"Tier Progress\",\r\n// value: \"558007.9\",\r\n// }\r\n  if(debug)\r\n    console.log(barData);\r\n\r\n  // //set state with chart width\r\n  const barChartRef = useRef();\r\n  const { width } = useChartSpec(barChartRef, data);\r\n  \r\n  if (!barData) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"barChart\"\r\n      ref={barChartRef}\r\n    >\r\n      <Bar {...barData} title={barData.title} width={width} height={250} />\r\n    </div>\r\n  );\r\n\r\n};\r\n","import React   from \"react\";\r\nimport { useGaugeContainer } from \"../../hooks/index\";\r\nimport \"./style.css\";\r\n\r\nexport default ({ qDef: objDef }) => {\r\nvar debug = false;\r\n\r\n  let row = objDef.map((items)=>{\r\n    return { valueType:(items[4].qText).toUpperCase(),\r\n              title:items[3].qText,\r\n              val:items[12].qText,\r\n              f_val:items[13].qText,\r\n              lbl:items[14].qText}\r\n    });\r\n  \r\n   //sort rows based on the valueType - Actual in index 0 and Targer in index 1   \r\n  // var order = [\"ACTUAL\",\"TARGET\"];\r\n  //  var sorted = row.sort(function(a, b) {\r\n  //   return order.indexOf((a.valueType)) - order.indexOf((b.valueType));\r\n  //   });\r\n  \r\n    if(debug){\r\n        console.log(row);\r\n        if(row.length<2)\r\n        console.error(\"error in number of rows\", row);\r\n        console.table(row);\r\n    }\r\n\r\nconst data = {\r\n        subtitle: row.length ? row[0].lbl : \"\",  //\"QTD Top Seller\" KID\r\n        value: row.length ? row[0].f_val : \"\",  //0 qtext\r\n\r\n        note2Text :  row.length > 1 ? (isNaN(row[0].val/row[1].val) || !isFinite(row[0].val/row[1].val)) ? \"0%\" :\r\n                                         parseInt((row[0].val/row[1].val)*100) +\"%\":\"0%\", //2txt\r\n\r\n        note2Title:  row.length > 1 ? \"Target Achieved\" :\"\",  // \"Target Achieved\"\r\n\r\n        note2Value:  row.length > 1 ?  (isNaN(row[0].val/row[1].val) || !isFinite(row[0].val/row[1].val)) ?0: row[0].val/row[1].val : \"\",  //0.12442316666666667,  //2 qNum\r\n\r\n        note1Value:  row.length > 1 ? row[1].f_val : \"\", //1qtxt\r\n        note1Title : row.length > 1 ? row[1].lbl : \"\", //\"Target\"\r\n}\r\n\r\nif(debug){\r\n    console.log(\"data\", data);\r\n}\r\n  const container = useGaugeContainer(data);\r\n\r\n  if (!data) return null;\r\n  \r\n  const {\r\n    subtitle,\r\n    value,\r\n    note1Value,\r\n    note2Text,\r\n    note1Title,\r\n    note2Title,\r\n  } = data;\r\n\r\n  return (\r\n    <div className=\"circle-block circle_2\">\r\n      <div className=\"utilization_container\">\r\n        <svg viewBox=\"0 0 100 100\" height={\"100%\"} className=\"svg\">\r\n          <g className=\"background-container\" transform=\"translate(0,6)\"></g>\r\n          <g ref={container} className=\"foreground-container\" transform=\"translate(0,6)\"></g>\r\n        </svg>\r\n\r\n        <div className=\"percentage percentage2\">\r\n          <div className=\"subtitle\">{subtitle}</div>\r\n          <div className=\"display\">{value}</div>\r\n          <div className=\"note\">\r\n            {note2Text} {note2Title}\r\n          </div>\r\n\r\n          <div className=\"note\">\r\n            {note1Value} {note1Title}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n ","import { useEffect, useState } from \"react\";\r\nimport ResizeObserver from \"resize-observer-polyfill\";\r\n\r\n/**\r\n * Hook, that returns the current dimensions of an HTML element.\r\n * Doesn't play well with SVG.\r\n */\r\n\r\nconst useResizeObserver = ref => {\r\n  const [dimensions, setDimensions] = useState(null);\r\n  useEffect(() => {\r\n    const observeTarget = ref.current;\r\n    const resizeObserver = new ResizeObserver(entries => {\r\n      entries.forEach(entry => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(observeTarget);\r\n    return () => {\r\n      resizeObserver.unobserve(observeTarget);\r\n    };\r\n  }, [ref]);\r\n  return dimensions;\r\n};\r\n\r\nexport default useResizeObserver;","import React, { useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport useResizeObserver from \"../../hooks/useResizeObserver\";\r\n\r\n/**\r\n * Component that renders a StackedBarChart\r\n */\r\n\r\nfunction LeapKpi({ data, keys, colors}) {\r\n // console.log(\"Leap\");\r\n\r\n  const svgRef = useRef();\r\n  const wrapperRef = useRef();\r\n  const dimensions = useResizeObserver(wrapperRef);\r\n\r\n  // will be called initially and on every data change\r\n  useEffect(() => {\r\n    const svg = d3.select(svgRef.current);\r\n    const { width, height } = dimensions || wrapperRef.current.getBoundingClientRect();\r\n\r\n    // stacks / layers\r\n    const stackGenerator = d3.stack()\r\n      .keys(keys)\r\n      .order(d3.stackOrderAscending);\r\n    const layers = stackGenerator(data);\r\n\r\n    const extent = [\r\n      0,\r\n        (d3.max(layers, layer => d3.max(layer, sequence => sequence[1]) * 1.40) > 0)? d3.max(layers, layer => d3.max(layer, sequence => sequence[1]) * 1.40) : 500\r\n    ];\r\n\r\n    // scales\r\n    const xScale = d3.scaleBand()\r\n      .domain(data.map(d => d.points))      \r\n      .range([0, width])\r\n      .padding(0.25);\r\n\r\n    const yScale = d3.scaleLinear()\r\n      .domain(extent)\r\n      .range([height, 0]);\r\n\r\n    // rendering\r\n    svg\r\n      .selectAll(\".layer\")\r\n      .data(layers)\r\n      .join(\"g\")\r\n      .attr(\"class\", \"layer\")\r\n      .attr(\"fill\", layer => colors[layer.key])\r\n      .selectAll(\"rect\")\r\n      .data(layer => layer)\r\n      .join(\"rect\")\r\n      .attr(\"x\", sequence => xScale(sequence.data.points))\r\n      .attr(\"width\", xScale.bandwidth())\r\n      .attr(\"y\", sequence => yScale(sequence[1]))\r\n      .attr(\"height\", sequence => yScale(isNaN(sequence[0])?0 : sequence[0]) - yScale(isNaN(sequence[1]) ?0 :sequence[1]) );\r\n\r\n    // axes\r\n    const xAxis = d3.axisBottom(xScale);\r\n    svg\r\n      .select(\".x-axis\")\r\n      .attr(\"transform\", `translate(0, ${height})`)\r\n      .call(xAxis);\r\n\r\n    const yAxis = d3.axisLeft(yScale)\r\n    .ticks(4)\r\n    .tickSize(-width,0,10).tickSizeOuter(0);        \r\n    // tickValues(yScale.ticks(2).concat(yScale.domain()));\r\n    svg.select(\".y-axis\").call(yAxis)\r\n\r\n  }, [colors, data, dimensions, keys]);  \r\n   \r\n\r\n  const values = Object.entries(colors);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div ref={wrapperRef} style={{ marginBottom: \"2rem\" }}>\r\n        <svg ref={svgRef}  height={110} style={{ marginLeft:\"20px\" }}>\r\n          <g className=\"x-axis\" />\r\n          <g className=\"y-axis\" />        \r\n        </svg>       \r\n      </div> \r\n      <div id=\"leapkpi-legend\">   \r\n      <div className=\"leapkpi-legend\">         \r\n            { \r\n            \r\n            values.map((value, index) => {\r\n              return (<React.Fragment key={index}>\r\n                {index >= 1 && <br></br>} <span className={\"key-dot\"} style={{ background: value[1] }} />  { value[0] } </React.Fragment>)                \r\n            })\r\n            }        \r\n      </div>\r\n      </div>\r\n      </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default LeapKpi;","import React from \"react\";\r\nimport LeapKpi from \"./leapkpi\";\r\nimport \"./style.css\";\r\n\r\nexport default ({ qDef: objDef }) => {\r\n// console.log(\"leapppp\")\r\n// console.log(\"leap qDef\", objDef);\r\nlet debug = false;\r\nlet row = objDef.map((items)=>{\r\n  return {pos:items[1].qText, //\r\n          kpi_Val_type:items[4].qText,\r\n          title:items[3].qText,\r\n          val:items[12].qText,\r\n          f_val:items[13].qText, //f_val\r\n          lbl:items[14].qText}\r\n  });\r\n\r\nif(debug){\r\n  console.log(row);\r\n  if(row.length<3)\r\n  console.error(\"Custom error\", row);\r\n console.table(row);\r\n}\r\n \r\n//color\r\n  let barcolors = { }\r\n  // barcolors[row[3].lbl] = \"Coral\";\r\n  // barcolors[row[4].lbl] = \"Royalblue\";\r\n  barcolors[row.find(o => o.kpi_Val_type === 'DIM 1 VALUE 1').lbl] = \"Coral\";\r\n  barcolors[row.find(o => o.kpi_Val_type === 'DIM 1 VALUE 2').lbl] = \"Royalblue\";\r\n\r\n//keys\r\n  var d_keys = [ row.find(o => o.kpi_Val_type === 'DIM 1 VALUE 1').lbl, \r\n                 row.find(o => o.kpi_Val_type === 'DIM 1 VALUE 2').lbl]\r\n//dim1\r\n  var dim1={\"points\": \"\"};\r\n  dim1.points = row.find(o => o.kpi_Val_type === 'DIM 1 LABEL').lbl;\r\n  dim1[d_keys[0]] = row.find(o => o.kpi_Val_type === 'DIM 1 VALUE 1').f_val; //10;\r\n  dim1[d_keys[1]] = row.find(o => o.kpi_Val_type === 'DIM 1 VALUE 2').f_val;//100;\r\n\r\n//dim2\r\nvar dim2={ \"points\": \"\"};\r\ndim2.points = row.find(o => o.kpi_Val_type === 'DIM 2 LABEL').lbl;\r\ndim2[d_keys[0]] = row.find(o => o.kpi_Val_type === 'DIM 1 VALUE 2').val;\r\ndim2[d_keys[1]] = row.find(o => o.kpi_Val_type === 'DIM 1 VALUE 2').val;\r\n\r\nif(debug){\r\n   console.log(barcolors)\r\n  // console.log(\"dim1\",dim1)\r\n  // console.log(\"dim2\",dim2)\r\n  // console.log(\"keys\",d_keys)\r\n}\r\n\r\n  const data = { \r\n    dimention:[\r\n      dim1,dim2\r\n    ],\r\n    keys: d_keys,\r\n    colors : barcolors,\r\n    leapbartitle: row.find(o => o.kpi_Val_type === 'TITLE LABEL').lbl,\r\n    leapkpititle: row.find(o => o.kpi_Val_type === 'ACTUAL').lbl,\r\n    leapkpivalue: row.find(o => o.kpi_Val_type === 'DIM 1 LABEL').f_val\r\n  };\r\n  \r\n  if(debug){\r\n  // console.log(\"leap\", data);\r\n  }\r\n\r\n  if (!data) return <div>Loading...</div>;\r\n\r\n  const {\r\n    dimention,\r\n    keys,\r\n    colors,\r\n    leapbartitle,\r\n    leapkpititle,\r\n    leapkpivalue\r\n  } = data;\r\n  //console.log(data);\r\n //const values = Object.entries(colors);\r\n\r\n  return (\r\n    <div className=\"leapkpi\">\r\n          <div className=\"col-8 col-sm-8 col-md-8 col-lg-8\">   \r\n            <div title={leapbartitle} className={`subtitle leaptitle`}>{leapbartitle}</div>   \r\n            <LeapKpi\r\n              data={dimention}          \r\n              keys={keys}\r\n              colors={colors}              \r\n            />      \r\n          </div>\r\n          <div className=\"col-4 col-sm-4 col-md-4 col-lg-4 leapbar-kpi \">\r\n                <div className=\"leapkpi-value-section\">\r\n                  <div className={\"leapkpi-value display\"}>\r\n                    {leapkpivalue}\r\n                  </div>     \r\n                </div>\r\n                <div  title={leapkpititle} className={`subtitle`}>{leapkpititle}</div>\r\n          </div>\r\n    </div>\r\n    ); \r\n\r\n};","import React, { useState }  from \"react\";\r\nimport { FiExternalLink } from 'react-icons/fi';\r\n\r\n\r\nconst ViewMore = ({ drillDownUrl }) => {\r\n   const [iconColor, setIconColor] = useState({data:{bg:\"#F3F4F4\",color:\"#3E8DDD\"}});\r\n\r\n  return (\r\n    <a {...drillDownUrl}  style={{ textDecoration: \"none\" }}\r\n    // onMouseEnter={()=>changeState(\"#3E8DDD\")}\r\n    target=\"_blank\">\r\n      \r\n   <div className=\"viewMore\"  style={{background:iconColor.data.bg, color:iconColor.data.color}}\r\n   onMouseEnter={()=>setIconColor( drillDownUrl.href? {data:{bg:\"#3E8DDD\",color:\"white\"}}: {data:{bg:\"#F3F4F4\",color:\"#3E8DDD\"}} )}\r\n   onMouseLeave={()=>setIconColor({data:{bg:\"#F3F4F4 \",color:\"#3E8DDD\"}})}\r\n   >\r\n    {drillDownUrl.href? \"View more\":\"\"} \r\n    {drillDownUrl.href? <FiExternalLink style={{ float:\"right\",position:\"relative\", top:\"5px\", left:\"-5px\",color:iconColor.data.color}} />:\"\"} \r\n   </div>\r\n  </a>\r\n  );\r\n};\r\nexport default ViewMore;\r\n","import React   from \"react\";\r\nimport { useDoughnutContainer } from \"../../hooks/index\";\r\nimport \"./style.css\";\r\n\r\nexport default ({ qDef: objDef  }) => {\r\n//var debug = false;\r\n\r\n// function kFormatter(num) {\r\n//   return Math.abs(num) > 999 ? Math.sign(num)*((Math.abs(num)/1000).toFixed(1)) + 'k' : Math.sign(num)*Math.abs(num)\r\n// }\r\n//console.log(\"DougnutDEf\",objDef);\r\n\r\nfunction search(nameKey, myArray){\r\n  for (var i=0; i < myArray.length; i++) {\r\n      if (myArray[i].lbl === nameKey) {\r\n          return myArray[i];\r\n      }\r\n  }\r\n}\r\n\r\nlet DataRows = objDef.map((items)=>{\r\n  return { valueType:(items[4].qText).toUpperCase(),\r\n            title:items[3].qText,\r\n            val:items[12].qNum,\r\n            f_val:items[13].qText,\r\n            lbl:items[14].qText === \"IDG\"?\"PCSD\":items[14].qText}  \r\n  });\r\n\r\n  //console.log(\"Dougnut\",DataRows); \r\n\r\nlet row = [];  \r\nlet chartTitle = DataRows[0].title.split(\"IDG\");\r\nlet currency_abb = DataRows[0].f_val.substr(DataRows[0].f_val.length - 3);\r\nvar chartColors = [\"#FF7675\",\"#8246AF\",\"#F04187\"];\r\n\r\n  row[0] = search(\"PCSD\", DataRows) ? search(\"PCSD\", DataRows) : {f_val: \"0.0 \" + currency_abb, lbl: \"PCSD\", title: null, val: 0, valueType: \"ACTUAL\" };\r\n  row[1] = search(\"ISG\", DataRows) ? search(\"ISG\", DataRows) : {f_val: \"0.0 \" + currency_abb , lbl: \"ISG\", title: null, val: 0, valueType: \"ACTUAL\" };\r\n  row[2] = search(\"Services\", DataRows) ? search(\"Services\", DataRows) : {f_val: \"0.0 \" + currency_abb, lbl: \"Services\", title: null, val: 0, valueType: \"ACTUAL\" };\r\n  \r\n//console.log(\"chk\", row);\r\n\r\nfunction nFormatter(num) {\r\n  if (num >= 999999999) {\r\n     return ((Math.abs(num) / 1000000000).toFixed(1) + 'B');\r\n  }\r\n  if (num >= 999999) {\r\n   return  ((Math.abs(num) / 1000000).toFixed(1) + 'M');\r\n  }\r\n  if (num >= 999) {\r\n     return ((Math.abs(num) / 1000).toFixed(1) + 'K');\r\n  }\r\n  return Math.sign(num)*Math.abs(num);\r\n}\r\n\r\n\r\n// var currency_symbols = {\r\n//   'USD': '$', // US Dollar\r\n//   'EUR': '€', // Euro\r\n//   'CRC': '₡', // Costa Rican Colón\r\n//   'GBP': '£', // British Pound Sterling\r\n//   'ILS': '₪', // Israeli New Sheqel\r\n//   'INR': '₹', // Indian Rupee\r\n//   'JPY': '¥', // Japanese Yen\r\n//   'KRW': '₩', // South Korean Won\r\n//   'NGN': '₦', // Nigerian Naira\r\n//   'PHP': '₱', // Philippine Peso\r\n//   'PLN': 'zł', // Polish Zloty\r\n//   'PYG': '₲', // Paraguayan Guarani\r\n//   'THB': '฿', // Thai Baht\r\n//   'UAH': '₴', // Ukrainian Hryvnia\r\n//   'VND': '₫', // Vietnamese Dong\r\n// };\r\n\r\n\r\nconst data = {\r\n  dataPoints:[\r\n    {\r\n        \"bu\": 0,\r\n        \"value\": row[0].val,\r\n        \"f_val\": row[0].f_val,\r\n        \"lbl\": row[0].lbl,\r\n        \"color\": \"red\"\r\n    },\r\n    {\r\n        \"bu\": 1,\r\n        \"value\":row[1].val,\r\n        \"f_val\": row[1].f_val,\r\n        \"lbl\": row[1].lbl,\r\n        \"color\":\"blue\"\r\n    },\r\n    {\r\n      \"bu\": 2,\r\n      \"value\": row[2].val,\r\n      \"f_val\":  row[2].f_val,\r\n      \"lbl\": row[2].lbl,\r\n      \"color\":\"green\"\r\n  },\r\n  \r\n],\r\ntitle: chartTitle, //row[0].title.split(row.[0].lbl),\r\ntotal: row[0].val + row[1].val + row[2].val\r\n}\r\n\r\nconst container = useDoughnutContainer(data.dataPoints);\r\n  \r\n  if (!data) return null;\r\n\r\n  const {\r\n     dataPoints,\r\n     title\r\n  } = data;\r\n\r\n  return (\r\n    <div className=\"donut-block\">\r\n    <div className=\"doughnut-title\">{title}</div>\r\n      <div ref={container}  className=\"utilization_container\">\r\n        <div className=\"toolTipContainer\"></div>\r\n        <svg viewBox=\"0 0 100 100\" className=\"svg\">\r\n          <g className=\"foreground-container\">\r\n          </g>\r\n        </svg>\r\n\r\n        {/* <div className=\"total midpoint\">\r\n          <div className=\"subtitle\">{ nFormatter(total===7540?1854:total)}</div>\r\n      \r\n        </div> */}\r\n        <div className=\"donut-legend\">\r\n     \r\n     \r\n        <div className=\"subtitle legend\">\r\n                  <span className=\"box\" style={{backgroundColor:chartColors[0]}}></span>\r\n                 \r\n                      <span className=\"lbl\">{dataPoints[0].lbl}</span>\r\n                      <span className=\"val\">{dataPoints[0].f_val}</span>\r\n       </div>\r\n        <div className=\"subtitle legend\">\r\n                    <span className=\"box\" style={{backgroundColor:chartColors[1]}}></span>\r\n                   \r\n                        <span className=\"lbl\">{dataPoints[1].lbl}</span>\r\n                        <span className=\"val\">{dataPoints[1].f_val}</span> \r\n          </div>\r\n          {/* {region!==\"EMEA\"?null:(   */}\r\n          <div className=\"subtitle legend\" >\r\n                    <span className=\"box\" style={{backgroundColor:chartColors[2]}}></span>\r\n                   \r\n                        <span className=\"lbl\">{dataPoints[2].lbl}</span>\r\n                        <span className=\"val\">{dataPoints[2].f_val}</span> \r\n          </div>\r\n          {/* )} */}\r\n        </div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","\r\nexport default () => {\r\n\r\n    const colorTheme = {reffLines:\"black\", chartPrimaryColor:\"#ff6a00\" };\r\n\r\n    return colorTheme\r\n}","export const drillDownMappingException = [\r\n  \"DCG-BR-9\",\r\n  \"DCG-EMEA-9\",\r\n  \"DCG-LAS-9\",\r\n  \"DCG-NA-9\",\r\n  \"PCSD-AP-14\",\r\n  \"PCSD-BR-14\",\r\n  \"PCSD-EMEA-14\",\r\n  \"PCSD-LAS-14\",\r\n  \"PCSD-NA-14\",\r\n  \"DCG-BR-10\",\r\n  \"DCG-EMEA-10\",\r\n  \"DCG-LAS-10\",\r\n  \"DCG-NA-10\",\r\n  \"PCSD-AP-15\",\r\n  \"PCSD-BR-15\",\r\n  \"PCSD-EMEA-15\",\r\n  \"PCSD-LAS-15\",\r\n  \"PCSD-NA-15\",\r\n];\r\nexport default drillDownMappingException;\r\n","import _ from \"lodash\";\r\n\r\nexport const regions = {\r\n    \"BR\":true,\r\n    \"EMEA\":true,\r\n    \"LAS\":true,\r\n    \"NA\":true,\r\n    \"AP\":true,\r\n };\r\n\r\n /*return only true regions from array \r\nuse keys and picky by function by lodash */\r\nexport default _.keys(_.pickBy(regions));;","import drillDownMappingException from \"./mappingTables/drillDownMappingException\";\r\nimport regions from \"./mappingTables/regions\";\r\n\r\n\r\n// FOR create dynamic URL generation for All KPI Object \r\nconst DrillDownUrl = (qDef, sheetData) => {\r\n  var debug = false;\r\n  if(debug){\r\n        console.log(sheetData);\r\n        console.log(\"Object GEO ID\",qDef[6].qText);\r\n        console.log(\"chart def\",qDef);\r\n  }\r\n\r\n  //var digits = () => Math.floor(Math.random() * 9000000000) + 1000000000;\r\n  let drillDownUrl = '';\r\n\r\n  if (qDef && qDef[6] && qDef[7] && qDef[8]) {\r\n\r\n\r\n    if (regions.includes(qDef[7].qText) && sheetData) {\r\n\r\n      // AS per custum requirement Region= EMEA and persona_type != ADMIN and bp_type !=='sales' has no url\r\n      // if (qDef[7].qText === 'EMEA' && qDef[8].qText !== 'Admin' && qDef[9].qText !== 'Sales') {\r\n      //   return {};\r\n      // }\r\n\r\n      // No Drilldown for bp_type \"Authorized\" OR \"Non Main Branch\"\r\n      if (qDef[7].qText === 'EMEA' && qDef[9] && (qDef[9].qText === 'Authorized' || qDef[9].qText === 'Non Main Branch')) {\r\n        return {};\r\n      }\r\n\r\n      // CR160 : No URl for \"Non Main Branch\" bp_type and bp_type_mapped\r\n      if (qDef[7].qText === 'EMEA'\r\n        && qDef[8].qText === 'Admin'\r\n        && qDef[9].qText === \"Non Main Branch\"\r\n        && qDef[10].qText === \"Non Main Branch\"\r\n      ) {\r\n        return {};\r\n      }\r\n\r\n      //Check if GEO_Object_Id of the chart is mapped with any sheet by its description \r\n      //return the details required to generate the drilldown URL  \r\n      const drilldownAppData = sheetData.filter(sheet => {\r\n        const desc = sheet.description.split(\"|\").map((item) => item.trim());\r\n                if(debug){\r\n                  console.log(desc);\r\n                }\r\n        return desc.includes(qDef[6].qText);\r\n      });\r\n\r\n      \r\n\r\n      /* Few GEO_Object_Id has to redirect seprate portal\r\n        https://lbp-uat.lenovo.com , need to discuss and for proper URL generation\r\n      */\r\n      if (drilldownAppData.length) {\r\n                    \r\n            if(debug)       \r\n              console.log(drilldownAppData);\r\n\r\n       //const appendUrl = `?appid=${drilldownAppData[0].app.id}&sheet=${drilldownAppData[0].engineObjectId}&opt=currsel%2Cnoanimate%2Cctxmenu&identity=${digits()}`;\r\n      // console.log(appendUrl);\r\n        if (!drillDownMappingException.includes(qDef[6].qText)) {\r\n         // drillDownUrl = `https://lbp.lenovo.com/${appendUrl}`;\r\n          drillDownUrl = `https://${drilldownAppData[0].tenant}/sense/app/${drilldownAppData[0].app.id}/sheet/${drilldownAppData[0].engineObjectId}/state/analysis/options/clearselections/theme/light`;\r\n        } else {\r\n           // drillDownUrl = `https://lenovo-lph-ai.us.qlikcloud.com/single/${appendUrl}`;\r\n          drillDownUrl = `https://${drilldownAppData[0].tenant}/sense/app/${drilldownAppData[0].app.id}/state/analysis/options/clearselections/theme/light`;\r\n        \r\n        }\r\n      }\r\n      else{\r\n        if(debug)\r\n        console.log(\"No Match found- no sheets mapped with this GEO_Object_Id -\" + qDef[6].qText)\r\n      }\r\n    }\r\n  }\r\n  const attributes = drillDownUrl ? { href: drillDownUrl } : {};\r\n  return attributes;\r\n};\r\n\r\nexport default DrillDownUrl;","import React, { useMemo,useCallback,useRef} from \"react\";\r\nimport { Gauge, Kpi, Line, LeapKpi, Bar, Doughnut } from \"../components\";\r\nimport { usePageData } from \"../hooks/index\";\r\nimport PlaceHolder from \"../components/PlaceHolder\";\r\nimport DrillDownUrl  from \"../DrillDownUrl\";\r\nimport { isNull } from \"lodash\";\r\nimport ViewMore from \"../components/ViewMore\";\r\nimport { groupBy as lodashGroupBy } from \"lodash\";\r\n\r\nconst Page = ({ data, sheetData,tabName }) => {\r\n //console.log(\"tab change triggered\",tabName)\r\n// console.log(\"data\",data)\r\n// console.log(\"Sheet data\",sheetData)\r\n  const { groupedKpis, groupedGauges, groupedLines, groupedBars, groupedLeaps, groupedDoughnut } = usePageData(data,tabName);\r\n\r\n  const bottomRowCount = groupedGauges.length + groupedLines.length + groupedKpis.length;\r\n// console.log(\"bottomRowCount\",bottomRowCount)\r\n\r\n  const kpiTopRowCount = groupedKpis.filter((d, i) => d[0][1].qNum < 2).length;\r\n// console.log(\"rendering top Kpi\")\r\n// console.log(\"kpiTopRowCount\",kpiTopRowCount)\r\n// console.log(\"Top KPI\", groupedKpis.filter((d, i) => d[0][1].qNum < 2)) \r\n// console.log(\"bottom KPI\", groupedKpis.filter((d, i) => d[0][1].qNum > 2)) \r\n\r\n// console.log(\"Top KPI\", groupedKpis.filter((d, i) => d[0][1].qNum < 2)) \r\n// console.log(\"bottom KPI\", groupedKpis.filter((d, i) => d[0][1].qNum > 2)) \r\n// console.log(\"Gauges\", groupedGauges) \r\n// console.log(\"doughnut\", groupedDoughnut) \r\n\r\n\r\nfunction getRowTitles(tabName,region,qDef){\r\n// let subTitle=\"\";\r\n//   if(region===\"EMEA\" && tabName.includes(\"Specialist\")){\r\n//      subTitle= qDef[0][17].qText?qDef[0][17].qText:null\r\n//   }\r\n//   if(tabName.includes(\"Lenovo\")){\r\n//     subTitle =  qDef[0][17].qText?qDef[0][17].qText:null\r\n//   }\r\n\r\n    return qDef[0][17].qText ? qDef[0][17].qText : null;\r\n}\r\n\r\n   const KpiColumnsTopRow = useMemo(() => {\r\n    if (groupedKpis !== undefined) {\r\n      return groupedKpis\r\n        .filter((d, i) => d[0][1].qNum < 2)  // number of Kpi to show in row1\r\n        .map((qDef, i) => {\r\n        //console.log(\"R1-\"+i,qDef);\r\n         let drillDownUrl = DrillDownUrl(qDef[i],sheetData)\r\n         // console.log(\"URL\",drillDownUrl)\r\n        //  console.log(i);\r\n        //  console.log(qDef[0][1].qText)\r\n          return (\r\n            <div\r\n            key={`kpi-top-${i}`}\r\n            row={ Math.trunc((qDef[0][1].qNum))}\r\n            position={qDef[0][1].qNum}\r\n            style={{ textDecoration: \"none\", color: \"white\" }}\r\n            className={\"col-6 col-sm-3 col-md-3 col-lg-3 chart\"}\r\n            // className={\"col-12 col-sm-3 col-md-6 col-lg-3 chart\"}\r\n            rel=\"noopener noreferrer\"\r\n            rowtitle = {getRowTitles(tabName,qDef[0][7].qText,qDef)}\r\n          >\r\n              <div className=\"kpi-top-container chart_card\">\r\n                <Kpi \r\n                qDef={qDef}\r\n                  bottomRowCount={bottomRowCount}\r\n                  kpiCount={kpiTopRowCount}\r\n                />\r\n                {/* <div style={{color:\"red\"}}>   {\"KPI\"+qDef[0][1].qNum} </div> */}\r\n                </div>\r\n              \r\n                    <ViewMore drillDownUrl= {drillDownUrl}></ViewMore>\r\n                </div>\r\n          )       \r\n        });\r\n       // console.log(me);\r\n       //return <div>KPI top row</div>;\r\n\r\n    }\r\n  }, [groupedKpis, kpiTopRowCount, bottomRowCount, sheetData, tabName]);\r\n\r\n  // // map through kpi defs for the bottom row of objects\r\n  var KpiColumnsBottomRow = useMemo(() => { \r\n    if (groupedKpis !== undefined) {\r\n      return groupedKpis\r\n      .filter((d, i) => d[0][1].qNum > 2)  //Kpi row 2\r\n        .map((qDef, i) => {\r\n         //console.log(\"R2-\"+i,qDef)\r\n         let drillDownUrl = DrillDownUrl(qDef[i],sheetData) //drilldown(qDef,i);   \r\n     // console.log(\"-\",qDef[0][17].qText)\r\n          return (\r\n             <div\r\n              key={`kpi-bottom-${i}`}\r\n              row={ Math.trunc((qDef[0][1].qNum))}\r\n              position={qDef[0][1].qNum}\r\n              style={{ textDecoration: \"none\", color: \"white\", height: \"100%\" }}\r\n              // className=\"col-12 col-sm-3 col-md-6 col-lg-3 chart\" //go\r\n              className=\"col-6 col-sm-3 col-md-3 col-lg-3 chart\"\r\n              rowtitle = {getRowTitles(tabName,qDef[0][7].qText,qDef)}\r\n              //className={bottomRowCount==5?\"col-6 col-sm-4 col-md-6 col-lg-4\":\"col-6 col-sm-4 col-md-4 col-lg-4\"}\r\n            >\r\n              <div className=\"kpi-bottom-container chart_card\" style={{ height: \"100%\" }}>\r\n                <Kpi qDef={qDef} />\r\n                {/* <div style={{color:\"red\"}}>   {\"KPI\"+qDef[0][1].qNum} </div> */}\r\n              </div>\r\n              <ViewMore drillDownUrl= {drillDownUrl}></ViewMore>\r\n             </div>\r\n          );\r\n        });\r\n       \r\n    }\r\n  }, [groupedKpis, sheetData, tabName]);\r\n\r\n  // // map through gauge defs\r\n  const GaugeColumns = useMemo(() => {\r\n    if (groupedGauges !== undefined) {\r\n      return groupedGauges\r\n        .filter((d) => d.length > 1)\r\n        .map((qDef, i) => {\r\n          let drillDownUrl = DrillDownUrl(qDef[i],sheetData) //drilldown(qDef,i);\r\n          return (\r\n            <div\r\n             key={`guage-${i}`}\r\n             row={ Math.trunc((qDef[0][1].qNum))}\r\n             position={qDef[0][1].qNum}\r\n             style={{ height: \"100%\" }}\r\n           //   className=\"col-6 col-sm-3 col-md-6 col-lg-3 chart\" //go\r\n             className=\"col-6 col-sm-3 col-md-3 col-lg-3 chart\"\r\n              rowtitle = {getRowTitles(tabName,qDef[0][7].qText,qDef)}\r\n            >\r\n           \r\n                <div className=\"kpi-bottom-container chart_card\" style={{ height: \"100%\" }}>\r\n                  <Gauge qDef={qDef} />\r\n                  {/* <div style={{color:\"red\"}}>   {\"KPI\"+qDef[0][1].qNum} </div> */}\r\n                </div>\r\n                <ViewMore drillDownUrl= {drillDownUrl} ></ViewMore>\r\n\r\n            </div>\r\n          );\r\n        });\r\n       // return <div>Guage</div>;\r\n    }\r\n  }, [groupedGauges, sheetData, tabName]);\r\n\r\n  // // map through line defs\r\n  const LineColumns = useMemo(() => {\r\n    if (groupedLines !== undefined) {\r\n      return groupedLines\r\n      .map((qDef, i) => {\r\n        let drillDownUrl = DrillDownUrl(qDef[i],sheetData) //drilldown(qDef,i);\r\n        return (\r\n          <div\r\n          key={`line-${i}`}\r\n          row={ Math.trunc((qDef[0][1].qNum))}\r\n          position={qDef[0][1].qNum}\r\n          style={{ height: \"100%\"}}\r\n          className={\r\n            GaugeColumns.length + KpiColumnsBottomRow.length === 0\r\n              ? \"col-9 col-sm-5 col-md-7 col-lg-5 chart\"\r\n              : \"col-6 col-sm-3 col-md-3 col-lg-3 chart\"\r\n          }\r\n          rowtitle = {getRowTitles(tabName,qDef[0][7].qText,qDef)}\r\n          >\r\n             \r\n                  <div className=\"line-container chart_card\" style={{ height: \"100%\" }}>\r\n                    <Line qDef={qDef} />\r\n                    {/* <div style={{color:\"red\"}}>   {\"KPI\"+qDef[0][1].qNum} </div> */}\r\n                  </div>\r\n                    <ViewMore drillDownUrl= {drillDownUrl} ></ViewMore>\r\n\r\n          </div>\r\n        );\r\n      });\r\n     // return <div>Line Columns</div>;\r\n    }\r\n  }, [groupedLines, GaugeColumns.length, KpiColumnsBottomRow.length, sheetData, tabName]);\r\n\r\n  // // map through line defs\r\n  const BarColumns = useMemo(() => {\r\n    if (groupedBars !== undefined) {\r\n      return groupedBars\r\n      .map((qDef, i) => {\r\n        // console.log(\"bar map----------\")\r\n        let drillDownUrl = DrillDownUrl(qDef[i],sheetData) //drilldown(qDef,i);\r\n        return (\r\n          <div\r\n            key={`bar-${i}`}\r\n            row={ Math.trunc((qDef[0][1].qNum))}\r\n            position={qDef[0][1].qNum}\r\n            className={\r\n              GaugeColumns.length + KpiColumnsBottomRow.length === 0\r\n                ? \"col-9 col-sm-4 col-md-4 col-lg-4 chart\"\r\n                : \"col-6 col-sm-3 col-md-3 col-lg-3 chart\"  //3\r\n            }\r\n            style={{\r\n              height: \"100%\",\r\n            }}\r\n            rowtitle = {getRowTitles(tabName,qDef[0][7].qText,qDef)}\r\n          >\r\n            <div className=\"bar-container kpi-bottom-container chart_card \" style={{ height: \"100%\" }}>\r\n              <Bar qDef={qDef} />\r\n              {/* <div style={{color:\"red\"}}>   {\"KPI\"+qDef[0][1].qNum} </div> */}\r\n            </div>\r\n            <ViewMore drillDownUrl= {drillDownUrl} ></ViewMore>\r\n          </div>\r\n        );\r\n      });\r\n     return <div>Bar Columns</div>;\r\n    }\r\n  }, [groupedBars, GaugeColumns, KpiColumnsBottomRow, sheetData, tabName]);\r\n\r\n   // // map through kpi defs for the bottom row of objects\r\n   const LeapKpiColums = useMemo(() => {\r\n    if (groupedLeaps !== undefined) {\r\n     // return groupedLeaps\r\n      return  groupedLeaps\r\n        .map((qDef, i) => {  \r\n          // console.log(\"Leap Map\", qDef)\r\n          let drillDownUrl = DrillDownUrl(qDef[i],sheetData) //drilldown(qDef,i);\r\n          return (      \r\n            <div\r\n            key={`leapbar-${i}`}\r\n          //  row={ Math.trunc((qDef[0][1].qNum))}\r\n            position= {qDef[0][1].qNum}\r\n            className={\r\n              GaugeColumns.length + KpiColumnsBottomRow.length === 0\r\n                ? \"col-9 col-sm-4 col-md-4 col-lg-4 chart\"\r\n                : \"col-6 col-sm-3 col-md-3 col-lg-3 chart\"\r\n            }\r\n            style={{\r\n              height: \"100%\",\r\n            }}\r\n            rowtitle = {getRowTitles(tabName,qDef[0][7].qText,qDef)}\r\n          >\r\n              <div className=\"leapkpi-bottom-container kpi-bottom-container chart_card\" style={{ height: \"100%\" }}>\r\n                <LeapKpi qDef={qDef} />\r\n                {/* <div style={{color:\"red\"}}>   {\"KPI\"+qDef[0][1].qNum} </div> */}\r\n              </div>            \r\n              <ViewMore drillDownUrl= {drillDownUrl} ></ViewMore>\r\n              </div>\r\n          );\r\n         // console.log(\"done\")\r\n        });\r\n        //return <div> LeapKpiColums</div>;\r\n    }\r\n  }, [groupedLeaps, GaugeColumns, KpiColumnsBottomRow, sheetData, tabName]);\r\n\r\n  const DoughnnutColums = useMemo(() => {\r\n    if (groupedDoughnut !== undefined) {\r\n     // return groupedDoughnut\r\n      return  groupedDoughnut\r\n        .map((qDef, i) => {  \r\n          // console.log(\"Leap Map\", qDef)\r\n          let drillDownUrl = DrillDownUrl(qDef[i],sheetData) //drilldown(qDef,i);\r\n          return (      \r\n            <div\r\n                key={`Doughnut-${i}`}\r\n                row={ Math.trunc((qDef[0][1].qNum))}\r\n                position= {qDef[0][1].qNum}\r\n                    // className={\"col-12 col-sm-12 col-md-6 col-lg-3 chart\"}\r\n                    className={\r\n                      GaugeColumns.length + KpiColumnsBottomRow.length === 0\r\n                        ? \"col-9 col-sm-4 col-md-4 col-lg-4 chart\"\r\n                        : \"col-6 col-sm-3 col-md-3 col-lg-3 chart\"\r\n                    }\r\n                    style={{\r\n                      height: \"100%\",\r\n                    }}\r\n                rowtitle = {getRowTitles(tabName,qDef[0][7].qText,qDef)}\r\n              >\r\n                  <div className=\"doughnut-bottom-container chart_card\" style={{ height: \"100%\" }}>\r\n                    <Doughnut qDef={qDef} />\r\n                    {/* <div style={{color:\"red\"}}>   {\"KPI\"+qDef[0][1].qNum} </div> */}\r\n                  </div>            \r\n                  <ViewMore drillDownUrl= {drillDownUrl} ></ViewMore>\r\n\r\n              </div>\r\n          );\r\n         // console.log(\"done\")\r\n        });\r\n        //return <div> LeapKpiColums</div>;\r\n    }\r\n  }, [groupedDoughnut, GaugeColumns , KpiColumnsBottomRow,sheetData, tabName]);\r\n\r\n\r\n  // Rearrange the bottom row to make sure line chart is positioned correctly\r\n  var bottomRow = [].concat(KpiColumnsTopRow,KpiColumnsBottomRow, GaugeColumns, LineColumns, BarColumns, LeapKpiColums,DoughnnutColums);\r\n\r\n  // console.log(\"bottomRow\",bottomRow)\r\n  var sortedBottomRow = bottomRow.sort((a, b) => {\r\n    //console.log(a.props)\r\n    return a.props.position - b.props.position;\r\n  });\r\n\r\n  // console.log(\"sortedBottomRow\",sortedBottomRow);\r\n\r\n  const groupBy = useCallback((data) => {\r\n   return Object.values(lodashGroupBy(data, (d) => d.props.row));\r\n }, []);\r\n\r\n//console.log(\"sortedBottomRow\",sortedBottomRow);\r\nlet groupedGridRows = groupBy(sortedBottomRow);\r\n //console.log(\"grouped\",groupedGridRows)\r\n    \r\n //console.log(window.innerWidth);\r\n//mobile rendering. Only show a 2 X 2 matrix when screen width is less than 500px\r\nif (window.innerWidth < 770 && KpiColumnsTopRow.length === 4 && 1===2) {\r\n  //console.log(\"window.innerWidth < 750\")\r\n //KpiColumnsTopRow.length = 2;\r\n     \r\n}\r\nif (window.innerWidth < 770 && sortedBottomRow.length >= 2 && 1===2) {\r\n sortedBottomRow = [].concat(KpiColumnsBottomRow, GaugeColumns);\r\n// sortedBottomRow.length = 2;\r\n}\r\nif (window.innerWidth < 770 && groupedGridRows.length){\r\n    if(groupedGridRows[0].length >=2){\r\n    //  groupedGridRows[0].length=2;\r\n    }\r\n\r\n  //groupedGridRows[1].length=2;\r\n  // if(groupedGridRows[1])\r\n  // groupedGridRows[1].length=2;\r\n  // groupedGridRows[2].length=1;\r\n  // groupedGridRows[3].length=1;\r\n}\r\n\r\nconst container_ref = useRef(null);\r\n\r\n\r\n  return (\r\n    <div ref={container_ref} className={\"App\"}>\r\n      <div className=\"App-header\" >\r\n        {data.length === 0 ? (\r\n         // <div className=\"noAccessBg\">\r\n          <PlaceHolder message=\"No data available\" />\r\n         // </div>\r\n        ) : \r\n        (\r\n          <div  className=\"container-fluid\">\r\n            { groupedGridRows.length > 0 ? groupedGridRows\r\n                  .map( (rowItems,i)=>{\r\n                    let title = \"\";\r\n                    if(!isNull(rowItems)){\r\n                     // console.log(rowItems);\r\n                     title =  rowItems[0].props.rowtitle\r\n                    //  console.log(\"rowp\",rowItems[0].props.rowtitle);\r\n                      \r\n                      //temporary fix for lenvov 360 tab - \r\n                      //issue -if same bp subType is associated with two rows, both the rows will have same titel \r\n                      //solutiion - make the title empty if previous row has the same title      \r\n                       if(i>0 && tabName.includes(\"-\")){\r\n                         // console.log(\"PREV TITEL\",groupedGridRows[i-1][0].props.rowtitle);\r\n                         // console.log(\"CUR TITEL\",rowItems[0].props.rowtitle);\r\n                        //  console.log(\"adding sub titles\");\r\n                        // console.log(container_ref.current);\r\n                         title= groupedGridRows[i-1][0].props.rowtitle === rowItems[0].props.rowtitle ? \"\" : rowItems[0].props.rowtitle;\r\n                       }\r\n                    }\r\n\r\n                    return (<div key={i}> {!isNull(rowItems)?<div className=\"page-subTitle\">{rowItems.length? title :\"\"}</div> : null}\r\n                                <div className=\"row align-items-center justify-content-around bottom-row\">\r\n                                   { rowItems }\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                ):null\r\n            }\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n    \r\nexport default Page;\r\n\r\n\r\n","import { groupBy as lodashGroupBy } from \"lodash\";\r\nimport { useCallback, useMemo } from \"react\";\r\n\r\nexport default (data,tabName) => {\r\n\r\n  //console.log(\"region Check\",data?data[0][7].qText===\"EMEA\":0);\r\n// // updating the position data based on the BP-Sybtype \r\n// // since the position cant be handled from App, updating the actual position vales from App \r\n// //Applicable for - tabs Specialist and region EMEA \r\nif(tabName.includes(\"Specialist\") && data[0]?data[0][7].qText===\"EMEA\":0){\r\n  //console.log(\"includes specalist\");\r\n  // console.log(data);\r\n\r\n let bpTypeGroup = lodashGroupBy(data, (d) => d[17].qText.toLowerCase());\r\n//console.log(\"bpGroup\",bpGroup);\r\n// list of bp subtypes \r\n let keys = Object.keys(bpTypeGroup);\r\n\r\n  Object.keys(bpTypeGroup).forEach(key => {\r\n          // console.log(key, bpGroup[key]);\r\n          // console.log(row);\r\n          let rowNum = keys.indexOf(key);\r\n     \r\n          bpTypeGroup[key].map((d,i)=>{  \r\n               d[1].row = rowNum+1; \r\n              //  let derivedPostion =   d[1].qNum+row;\r\n              //  d[1].qNum = derivedPostion;\r\n               //d[1].qText = derivedPostion.toString();\r\n               \r\n               let derivedPostion = Number(d[1].qText)+rowNum \r\n               d[1].qNum = derivedPostion;\r\n           })\r\n      });\r\n}\r\n\r\n\r\n  const {\r\n    kpi: kpis,\r\n    gauge: gauges,\r\n    line: lines,\r\n    bar: bars,\r\n    leap: leaps,\r\n    doughnut :doughnut\r\n  } = lodashGroupBy(data, (d) => d[2].qText.toLowerCase());\r\n  // // group charts with same position value together\r\n  const groupBy = useCallback((data) => {\r\n    return Object.values(lodashGroupBy(data, (d) => d[1].qNum));\r\n  }, []);\r\n\r\n  const groupedKpis = useMemo(() => groupBy(kpis), [groupBy, kpis]);\r\n  const groupedGauges = useMemo(() => groupBy(gauges), [groupBy, gauges]);\r\n  const groupedLines = useMemo(() => groupBy(lines), [groupBy, lines]);\r\n  const groupedBars = useMemo(() => groupBy(bars), [groupBy, bars]);\r\n  const groupedLeaps = useMemo(() => groupBy(leaps), [groupBy, leaps]);\r\n  const groupedDoughnut = useMemo(() => groupBy(doughnut), [groupBy, doughnut]);\r\n  return { groupedKpis, groupedGauges, groupedLines, groupedBars , groupedLeaps, groupedDoughnut};\r\n};\r\n","import React from \"react\";\r\nimport languages from \"../../mappingTables/languageTranslations\";\r\n\r\nconst urlParams = new URLSearchParams(window.location.search);\r\nconst languageParam = urlParams.get(\"lang\");\r\n\r\nconst Loader = ({ message }) => {\r\n\r\n  if (message !== \"Connection Failed\" && languageParam !== null) {\r\n    var message1 = languages.filter((d, i) => d.key === languageParam);\r\n\r\n    if (message1 && message1[0] && message1[0].loadingMsg !== undefined) {\r\n      message = message1[0].loadingMsg;\r\n    } else {\r\n      message = \"Dashboard is loading, please wait\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        fontSize: \"24px\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\nexport default Loader;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport \"./style.css\";\r\n\r\nconst Tab = ({ children }) => {\r\n  const [activeTabSubTab, setActiveSubTab] = useState(0);\r\n  const [tabsData, setTabsData] = useState([]);\r\n  const [dataAvailalbe, SetdataAvailalbe] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let data = [];\r\n    React.Children.forEach(children, (element) => {\r\n      if (!React.isValidElement(element)) return;\r\n      const { props: { tab,isMain,children }} = element;\r\n      data.push({ tab,isMain,children });\r\n    });\r\n\r\n    //console.log(\"data\", data);\r\n    setTabsData(data);\r\n\r\n  }, [children]);\r\n\r\n\r\n  useEffect(() => {\r\n        //console.log(\"active change\");\r\n    if(tabsData[activeTabSubTab] !== undefined){\r\n            // console.log(\"children\",tabsData);\r\n            // console.log(\"children LENGTH\",tabsData[activeTabSubTab].children[1].props.data.length);\r\n\r\n      if(tabsData[activeTabSubTab].children[1].props.data.length > 0){\r\n         SetdataAvailalbe(true)\r\n      }else{ SetdataAvailalbe(false)}\r\n    }\r\n\r\n      setActiveSubTab(0)\r\n   \r\n  },[tabsData]);\r\n\r\n\r\n  const container_refZ = useRef(null);\r\n      useEffect(() => {\r\n           //console.log(\"-\",container_refZ.current.closest('#root').clientHeight);\r\n       if(tabsData.length !=0  )    \r\n       {\r\n          // console.log(\"active tab\",activeTabSubTab)\r\n          // console.log(\"tab data\",tabsData)\r\n            if(container_refZ.current && tabsData[activeTabSubTab]){\r\n\r\n              let message = { \r\n                    height:container_refZ.current.closest('#root').clientHeight,\r\n                    rows:container_refZ.current.children.length,\r\n                    tabName:tabsData[activeTabSubTab].tab\r\n                  }\r\n                  if(message.height!==\"undefined\" ){\r\n                //   console.log(\"*Height info from Dahboard:\",message);\r\n                    window.parent.postMessage(message,\"*\");\r\n                  }\r\n            }\r\n        }\r\n      });\r\n\r\n      function handleSubTabClick(idx) {\r\n        idx==tabsData.length ?   setActiveSubTab(0) :  setActiveSubTab(idx);\r\n      }\r\n\r\n  return (\r\n    <div className={dataAvailalbe?\"\":\"noAccessBg\"}>\r\n      <ul className=\"nav nav-tabs nav-justified\" >\r\n        {tabsData.map(({tab}, idx) => {\r\n            return (\r\n                  <li  key={idx}  style={ tab ==\"-\"? { display:\"none\"} : { display:\"block\"}} className={`nav-item ${idx === activeTabSubTab ? \"active\" : \"\"}`}>\r\n                    <a\r\n                      className={`nav-link ${idx === activeTabSubTab ? \"active\" : \"\"}`}\r\n                      href=\"#\"\r\n                      onClick={() => handleSubTabClick(idx)}>\r\n                      {tab}\r\n                    </a>\r\n                  </li>\r\n            )\r\n        })}\r\n      </ul>\r\n\r\n      <div ref={container_refZ} className={\"tab-content p-3\"}>\r\n            {tabsData[activeTabSubTab] && tabsData[activeTabSubTab].children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst TabPane = ({ children }) => {\r\n  return ( children );\r\n};\r\n\r\nTab.TabPane = TabPane;\r\n\r\n\r\nexport default Tab;\r\n//className=\"w-100 custom-tab\"\r\n//className=\"tab-content p-3 noAccessBg\"\r\n//className={dataAvailalbe?\"w-100 custom-tab\":\" w-100 custom-tab noAccessBg\"}\r\n // className = this.state.clicked ? 'click-state' : 'base-state';\r\n // className={dataAvailalbe?\"tab-content p-3 \":\" w-100 custom-tab noAccessBg\"}","import React, { useMemo,useState } from \"react\";\r\nimport \"./App.css\";\r\n\r\n// Shared Components\r\nimport Page from \"./Pages/PerformancePage\";\r\n\r\n// Lodash\r\n//import { filter, flow, sortBy } from \"lodash/fp\";\r\nimport { flow, sortBy } from \"lodash/fp\";\r\nimport PlaceHolder from \"./components/PlaceHolder\";\r\n//import Legend from \"./components/Legend\";\r\nimport Loader from \"./components/Loader\";\r\nimport { useSession, useAppData, useGetSheetData } from \"./hooks/index\";\r\n\r\nimport Tab from \"./components/tab\";\r\n\r\nconst App = () => {\r\n  //console.log(\"Performance Page\");\r\n  //Qlik error handling\r\n  const connectionError = useSession();\r\n  var { chartControlData,tabData, accessDenied, appData, isLoading } = useAppData();\r\n\r\n// console.log(\"tab\",tab);\r\n//if(chartControlData){\r\n//  let s= testdata.map((d,i)=>{ return d})\r\n//  console.log(chartControl.data.concat(s))\r\n//  chartControlData = chartControlData.concat(s);\r\n// console.log(\"chartControlData#\");\r\n// console.log(chartControlData);\r\n// }\r\n\r\n//  console.log(\"appData\",appData);\r\n \r\n      const sheetData = useGetSheetData();\r\n      const [activePrimaryTab, setActivePrimaryTab] = useState(0);\r\n      var subTabGroups = [];\r\n      var subTabTitles = [];\r\n\r\n\r\n     \r\n\r\n      function getSubData(){\r\n        if(primaryTabgroups!== undefined && subTabTitles!==undefined){\r\n             let groupsd =  subTabTitles.map((t,i)=>{\r\n                return primaryTabgroups[activePrimaryTab].filter((d) =>{ return d[11].qText === t});\r\n            });\r\n            subTabGroups = groupsd;\r\n          }\r\n       }\r\n\r\n      // useEffect(()=>{\r\n      //   getSubData();\r\n      // },[activePrimaryTab])\r\n\r\n      subTabGroups = useMemo(() => {\r\n\r\n        if(primaryTabgroups!== undefined && subTabTitles!==undefined){\r\n           return  subTabTitles.map((t,i)=>{\r\n             return primaryTabgroups[activePrimaryTab].filter((d) =>{ return d[11].qText === t});\r\n         });\r\n        \r\n       }\r\n       {\r\n        return [];\r\n       }\r\n\r\n      },[activePrimaryTab])\r\n\r\n  //sort the data by position order\r\n  const sortedData = useMemo(\r\n    () =>\r\n      flow(\r\n     //filter((d) => d[1].qNum < 3),  // reduce charts based on  position\r\n        sortBy((d) => d[1].qNum)\r\n      )(chartControlData),\r\n    [chartControlData]\r\n  );\r\n\r\n  // console.log(\"sortedData\",sortedData)\r\n  // console.log(\"tabData\",tabData)\r\n\r\n  const primaryTabs = useMemo(() => {\r\n   let f =  tabData.map((tabItems)=>{ return tabItems[1].qText})\r\n    return f.filter((item, index) => f.indexOf(item) === index);\r\n }, [tabData]);\r\n\r\n  const primaryTabgroups = useMemo(() => {\r\n    if(primaryTabs.length){\r\n      return primaryTabs.map((t,i)=>{\r\n        //return sortedData;\r\n          return sortedData.filter((d) =>{ return d[18].qText === primaryTabs[i]});\r\n        });\r\n    }\r\n  }, [primaryTabs,sortedData]);\r\n\r\n\r\n subTabTitles = useMemo(() => {\r\n   let _subTabs = [];\r\n   \r\n     if(primaryTabgroups!=undefined)\r\n     {\r\n      // console.log(\"activePrimaryTab**\", activePrimaryTab)\r\n             _subTabs = primaryTabgroups[activePrimaryTab].map((t,i)=>{\r\n                   //return sortedData.filter((d) =>{ return d[11].qText === subTabTitles[i]  });\r\n                   //return t[11].qText;\r\n                  // console.log(t[11].qText);\r\n                   return t[11].qText;\r\n                 });\r\n\r\n                //  console.log(\"_subTabs*\",_subTabs)\r\n\r\n             let unique_subTabs = [...new Set(_subTabs.map(item => item))];\r\n            //  console.log(\"unique\",unique_subTabs)\r\n           return unique_subTabs;\r\n     }\r\n     else{\r\n      return [];\r\n     }\r\n\r\n}, [primaryTabgroups,activePrimaryTab]);\r\n\r\nif(tabData !== undefined && tabData.length){\r\n    getSubData();\r\n        // console.log(\"primaryTabs\", primaryTabs);\r\n        // console.log(\"primaryTabgroups\",primaryTabgroups);\r\n        // console.log(\"subTabTitles\",subTabTitles);\r\n        // console.log(\"subTabGroups\",subTabGroups);\r\n\r\n}\r\n\r\n  //Display Loader before data display\r\n  if (isLoading && !connectionError.doc.error && !connectionError.session.error) {\r\n    return (\r\n     // <div className=\"noAccessBg\">\r\n      <Loader message=\"Dashboard is loading, please wait\" />\r\n     // </div>\r\n    );\r\n  }\r\n\r\n  //connectionError.doc.error =\"Error\"\r\n\r\n// subTabTitles.length===0 || subTabGroups === undefined ?\r\n  var noDataCondition = subTabTitles.length===0 || subTabTitles === undefined || primaryTabgroups ===undefined ||connectionError.doc.error;\r\n  return (\r\n    \r\n    <div  className={noDataCondition ? \"noAccessBg\": \"\"} > \r\n        {accessDenied || connectionError.doc.error !== null ? \r\n        (\r\n          <PlaceHolder message=\"No data available\" />\r\n        ) : connectionError.session.error !== null ? (\r\n          <PlaceHolder message=\"Connection Failed\" />\r\n        ): \r\n        //  subTabTitlesT.length===0 ? (<PlaceHolder message=\"sub Tab lenth 0\" />): \r\n        //subTabTitles === undefined || subTabGroups === undefined || subTabGroups.length === 0 ? (<PlaceHolder message=\"subTabGroups -undefinde\" />) :\r\n        (   \r\n          <div className=\"\">\r\n            <div className=\"pri-nav-container\">\r\n              <ul className=\"pri-nav pri-nav-tabs nav-justified my-Container\">\r\n                      {primaryTabs.map(( Maintab, idx) => {\r\n                        return (\r\n                          <li  key={idx}  className={`pri-nav-item ${idx === activePrimaryTab ? \"active\" : \"\"}`}>\r\n                            <a\r\n                              className={`pri-nav-link ${idx === activePrimaryTab ? \"active\" : \"\"}`}\r\n                              href=\"#\"\r\n                              onClick={()=>setActivePrimaryTab(idx)}\r\n                            >\r\n                              {Maintab} \r\n                            </a>\r\n                          </li>\r\n                        )\r\n                    })}\r\n              </ul>\r\n              </div>\r\n              {/* {primaryTabs.map(( Maintab, idx) => {\r\n                  return (<button onClick={()=>setActivePrimaryTab(idx)}> {Maintab} </button>)\r\n              })\r\n                \r\n              } */}\r\n             \r\n              <Tab> { subTabTitles.map((tabN, idx) =>{  \r\n                                return  ( \r\n                                      <Tab.TabPane key={idx} tab={tabN} >\r\n                                          {appData !== null && chartControlData !== null ? (\r\n                                          <div style={subTabGroups[idx].length ? {}:{display:\"none\"}}>\r\n                                            {/* <div style={1==1 ? {}:{display:\"none\"}}> */}\r\n                                            <span className=\"pageName\">\r\n                                            </span>\r\n                                            <span className=\"quarter\">{appData.quarter}</span>\r\n                                            <div style={{ lineHeight: \"1\" }}>\r\n                                              <span className=\"snapDate\">{`As of: ${appData.snapDate}`}</span>\r\n                                              <span className=\"quarterRange\">\r\n                                                {`(${appData.quarterStartDate} `} &nbsp;&nbsp;-&nbsp;&nbsp;\r\n                                                {` ${appData.quarterEndDate})`}\r\n                                              </span>\r\n                                            </div>\r\n                                      \r\n                                          </div>\r\n                                        ) : null\r\n                                        }\r\n                                        {/* <div  key={idx} data={subTabGroups[idx]}> {tabN}</div> */}\r\n                                        <Page data={subTabGroups[idx]} sheetData={sheetData} tabName={tabN}/> \r\n                                      </Tab.TabPane> \r\n                              )})\r\n                    }\r\n                </Tab>\r\n          </div>  \r\n        )\r\n    }\r\n    </div>\r\n    \r\n  );\r\n};\r\nexport default App;\r\n\r\n","import { useContext } from \"react\";\r\nimport { QlikContext } from \"./index\";\r\n\r\nexport default () => useContext(QlikContext);\r\n","import { useState, useEffect, useCallback } from \"react\";\r\nimport { useSessionObject, useHyperCubeData } from \"./index\";\r\nimport chartControlDef from \"../qDefs/List/chartControl\";\r\nimport appDataDef from \"../qDefs/List/appDataDef\";\r\nimport { useGetLayout } from \"qlik-hooks/GenericObject\";\r\n\r\nexport default () => {\r\n  const [chartControlData, setChartControlData] = useState(null);\r\n  const [appData, setAppData] = useState(null);\r\n  const [accessDenied, setAccessDenied] = useState(false);\r\n  const [isLoading, setPreLoader] = useState(true);\r\n  const [tabData, setTab] = useState([]);\r\n\r\n  //Get the information for which charts and data to display.\r\n  const chartControl = useHyperCubeData({\r\n    def: chartControlDef,\r\n    dataTransformFunc: useCallback(\r\n      (qHyperCube) => {\r\n        // console.log(qHyperCube)\r\n        // const qMatrix = qHyperCube.qDataPages[0].qMatrix;\r\n    //    console.log(\"chartControl\",qMatrix);\r\n        return qHyperCube.qDataPages.length > 0 ? qHyperCube.qDataPages[0].qMatrix: null;\r\n      },\r\n      [chartControlDef]\r\n    ),\r\n  });\r\n\r\n  //set the chart control matrix to state\r\n  useEffect(() => {\r\n    if (chartControl.data !== null) {\r\n\r\n  const clone_chartControl = [...chartControl.data];\r\n\r\n   clone_chartControl.map((f)=>{\r\n      // if(f[11].qIsNull ){\r\n      //       f[11].qText = \"*\"\r\n      //   }\r\n        if(!f[11].qText ){\r\n            f[11].qText = \"-\"\r\n        }\r\n      //   if(!f[18].qText ){\r\n      //     f[18].qText = \"#\"\r\n      // }\r\n    })\r\n\r\n    setChartControlData(chartControl.data);\r\n    }\r\n  }, [chartControl]);\r\n\r\n  //Get the information for which charts and data to display.\r\n\r\n  const appLayout = useHyperCubeData({\r\n    def: appDataDef,\r\n    dataTransformFunc: useCallback((qHyperCube) => {\r\n      const qMatrix = qHyperCube.qDataPages[0].qMatrix[0];\r\n      return {\r\n        quarter: qMatrix[0].qText,\r\n        quarterStartDate: qMatrix[1].qText,\r\n        quarterEndDate: qMatrix[2].qText,\r\n        snapDate: qMatrix[3].qText,\r\n      };\r\n    }, []),\r\n  });\r\n  //set the chart control matrix to state\r\n  useEffect(() => {\r\n    if (appLayout.data !== null) {\r\n      setAppData(appLayout.data);\r\n      setPreLoader(false)\r\n    }\r\n  }, [chartControl, appLayout]);\r\n\r\n\r\nconst tabOrder = ['PCSD Sales Overview',\r\n                  'PCSD Main Program', \r\n                  'PCSD Specialist Program',\r\n                  'PCSD Program Performance',\r\n                  'PCSD Sales Performance',\r\n                  'PCSD - Sales', \r\n                  'PCSD - Services', \r\n                  'PCSD - Rebates',\r\n                  'ISG',\r\n                  'ISG Sales Overview',\r\n                  'ISG Main Program', \r\n                  'ISG Specialist Program',\r\n                  'ISG Sales Performance',\r\n                  'ISG Program Performance',\r\n                  'Tier',\r\n                  'Others',\r\n                ]\r\n\r\n\r\n   ///Create session object for business group\r\n   const tabField = useSessionObject({\r\n    qInfo: {\r\n      qType: \"tab list\",\r\n    },\r\n    qHyperCubeDef: {\r\n      qDimensions: [\r\n        {\r\n         \r\n          qDef: {\r\n            qFieldDefs: [\"sub_tab\"],\r\n          qSortCriterias: [\r\n            {\r\n              qSortByState: 0,\r\n              qSortByFrequency: 0,\r\n              qSortByNumeric: 0,\r\n              qSortByAscii: 1,\r\n              qSortByLoadOrder: 0,\r\n              qSortByExpression: 1,\r\n              qExpression: {\r\n               // qv: \"MATCH(tab, 'PCSD Sales Overview','PCSD Main Program', 'PCSD Specialist Program', 'ISG Sales Overview','ISG Main Program', 'ISG Specialist Program', 'ISG')\"\r\n                qv : \"MATCH(sub_tab,\"+\"'\" + tabOrder.join(\"','\") + \"'\" +\")\" \r\n                \r\n              },\r\n            },\r\n          ],\r\n          }\r\n         \r\n        }, {\r\n          qDef: {\r\n            qFieldDefs: [\"tab\"], //1/\r\n          },\r\n        },\r\n        \r\n      ],\r\n      qInitialDataFetch: [\r\n        {\r\n          qWidth: 2,\r\n          qHeight: 100,\r\n        },\r\n      ],\r\n    },\r\n  });\r\n\r\n\r\n  // Get the layout of the business groups session object and set it to state.\r\n  const tabLayout = useGetLayout(tabField, {\r\n    params: [],\r\n    invalidations: true,\r\n  }).qResponse;\r\n\r\n  //error handling for failure to get response from Qlik\r\n  useEffect(() => {\r\n    if (tabLayout !== null) {\r\n      let s = tabLayout.qHyperCube.qDataPages[0].qMatrix;\r\n      s.forEach(element => {\r\n        element.forEach(f=>{\r\n            if(!f.hasOwnProperty('qText')){\r\n                f.qText = \"-\"\r\n            }\r\n        })\r\n        \r\n      });\r\n      setTab(s);\r\n       // setTab(tabLayout.qHyperCube.qDataPages[0].qMatrix);\r\n    }\r\n  }, [tabLayout]);\r\n\r\n\r\n  return {\r\n    tabData,\r\n    chartControlData,\r\n    accessDenied,\r\n    appData,\r\n    isLoading\r\n  };\r\n};\r\n","import { useState, useEffect, useCallback, useContext } from \"react\";\r\nimport { useHyperCubeData } from \"./index\";\r\nimport drillDownDataDef from \"../qDefs/List/drillDownDataDef\";\r\nimport { QlikContext } from \"./QlikProvider\";\r\n\r\nexport default () => {\r\n  const [sheetData, setSheetData] = useState(null);\r\n  const { apps } = useContext(QlikContext);\r\n  const { config } = useContext(QlikContext);\r\n\r\n  const sheets = useHyperCubeData({\r\n    def: drillDownDataDef,\r\n    dataTransformFunc: useCallback((qHyperCube) => {\r\n      return qHyperCube.qDataPages[0].qMatrix.map((sheet) => ({\r\n        app: {},\r\n        sheetId: sheet[0].qText,\r\n        engineObjectId: sheet[0].qText,\r\n        sheetName: sheet[1].qText,\r\n        description: sheet[2].qText,\r\n        appName: sheet[3].qText\r\n      }));\r\n    }, []),\r\n  });\r\n\r\n  \r\n  useEffect(() => {\r\n    if (apps && sheets && sheets.data) {\r\n      sheets.data.forEach(sheet => {\r\n        sheet.app.id = apps.find(app => app.name === sheet.appName)?.resourceId\r\n        sheet.tenant = config.host;\r\n      });\r\n      setSheetData(sheets.data);\r\n    }\r\n  }, [apps, sheets, config]);\r\n\r\n  return sheetData;\r\n};\r\n","import \"react-app-polyfill/ie11\";\r\nimport \"react-app-polyfill/stable\";\r\n\r\nimport setup from \"./setup\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport { QlikProvider } from \"./hooks/index\";\r\n\r\n//polyfill for browser compatibility\r\nif (!String.prototype.startsWith) {\r\n  String.prototype.startsWith = function (searchString, position) {\r\n    position = position || 0;\r\n    return this.substr(position, searchString.length) === searchString;\r\n  };\r\n}\r\n\r\nsetup(\"NEW SALES PERFORMANCE DASHBOARD\")\r\n  .then((data) => {\r\n    if (data) {\r\n      ReactDOM.render(\r\n        <QlikProvider config={data.config} apps={data.apps}>\r\n          <App />\r\n        </QlikProvider>,\r\n        document.getElementById(\"root\")\r\n      );\r\n    }\r\n  })\r\n  .catch((error) => {\r\n    console.log(\"ERROR\", error);\r\n  });\r\n"],"sourceRoot":""}